/******************************************************************************
* Integrating the improved Plantard arithmetic into Kyber.
*
* Efficient Plantard arithmetic enables a faster Kyber implementation with the
* same stack usage.
*
* See the paper at https:// eprint.iacr.org/2022/956.pdf for more details.
*
* @author   Junhao Huang, BNU-HKBU United International College, Zhuhai, China
*           jhhuang_nuaa@126.com
*
* @date     September 2022
******************************************************************************/
.syntax unified
.cpu cortex-m4
.thumb


.macro load a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  ldr.w \a0, [\a, \mem0]
  ldr.w \a1, [\a, \mem1]
  ldr.w \a2, [\a, \mem2]
  ldr.w \a3, [\a, \mem3]
.endm

.macro store a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  str.w \a0, [\a, \mem0]
  str.w \a1, [\a, \mem1]
  str.w \a2, [\a, \mem2]
  str.w \a3, [\a, \mem3]
.endm

.macro doubleplant a, tmp, q, qa, plantconst
 smulwb \tmp, \plantconst, \a
 smulwt \a, \plantconst, \a
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a, \a, \q, \qa
 pkhtb \a, \a, \tmp, asr #16
.endm

.macro mul_twiddle_plant a, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a
 smulwt \a,   \twiddle, \a
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a, \a, \q, \qa
 pkhtb \a, \a, \tmp, asr #16
.endm

.macro doublebutterfly_plant a0, a1, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a1
 smulwt \a1, \twiddle, \a1
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a1, \a1, \q, \qa
 pkhtb \tmp, \a1, \tmp, asr #16
 usub16 \a1, \a0, \tmp
 uadd16 \a0, \a0, \tmp
.endm

.macro two_doublebutterfly_plant a0, a1, a2, a3, twiddle0, twiddle1, tmp, q, qa
 doublebutterfly_plant \a0, \a1, \twiddle0, \tmp, \q, \qa
 doublebutterfly_plant \a2, \a3, \twiddle1, \tmp, \q, \qa
.endm

.macro fullplant a0, a1, a2, a3, a4, a5, a6, a7, tmp, q, qa, plantconst
 movw \plantconst, #44984
 movt \plantconst, #19
 doubleplant \a0, \tmp, \q, \qa, \plantconst
 doubleplant \a1, \tmp, \q, \qa, \plantconst
 doubleplant \a2, \tmp, \q, \qa, \plantconst
 doubleplant \a3, \tmp, \q, \qa, \plantconst
 doubleplant \a4, \tmp, \q, \qa, \plantconst
 doubleplant \a5, \tmp, \q, \qa, \plantconst
 doubleplant \a6, \tmp, \q, \qa, \plantconst
 doubleplant \a7, \tmp, \q, \qa, \plantconst
.endm

// input: 0.5/1q
.macro _3_layer_double_inv_CT_16_plant_light c0, c1, c2, c3, c4, c5, c6, c7, xi2, xi4, xi5, xi6, twiddle1, tmp2, q, qa, tmp

 // layer 1
 sadd16 \tmp, \c0, \c1 // c0, c1
 ssub16 \c1, \c0, \c1
 sadd16 \tmp2, \c2, \c3 // c2, c3
 ssub16 \c3, \c2, \c3
 // tmp, c1, tmp2, c3: 1q maximum
 sadd16 \c0, \c4, \c5 // c4, c5
 ssub16 \c5, \c4, \c5
 sadd16 \c2, \c6, \c7 // c6, c7
 ssub16 \c7, \c6, \c7
 // c4, c6 are free at this point
 // c0,c5,c2,c7 1q maximum

 // layer 2
 sadd16 \c6, \tmp, \tmp2 // c0, c2
 ssub16 \tmp2, \tmp, \tmp2
 sadd16 \c4, \c0, \c2 // c4, c6
 ssub16 \c2, \c0, \c2
 // c6, tmp2, c4, c2: 2q maximum

 vmov \twiddle1, \xi2
 doublebutterfly_plant \c1, \c3, \twiddle1, \tmp, \q, \qa
 doublebutterfly_plant \c5, \c7, \twiddle1, \tmp, \q, \qa
 // c1, c3, c7, c5: 1.5q maximum;

 // tmp and c0 are free at this point
 // layer 3
 sadd16 \c0, \c6, \c4 // c0, c4
 ssub16 \c4, \c6, \c4
 // c0, c4: 4q
 // c6 are free at this point
 vmov \twiddle1, \xi4
 doublebutterfly_plant \c1, \c5, \twiddle1, \tmp, \q, \qa
 // c1, c5: 2q maximum

 vmov \twiddle1, \xi5
 // this block is one doublebutterfly
 smulwb \tmp, \twiddle1, \c2  // c2, c6
 smulwt \c2,  \twiddle1, \c2
 smlabt \tmp, \tmp, \q, \qa
 smlabt \c2, \c2, \q, \qa
 pkhtb \tmp, \c2, \tmp, asr #16
 ssub16 \c6, \tmp2, \tmp
 sadd16 \c2, \tmp2, \tmp
 // c6, c2: 4.5q
 vmov \twiddle1, \xi6
 doublebutterfly_plant \c3, \c7, \twiddle1, \tmp, \q, \qa
 // c3, c7: 2.5q maximum
.endm
.macro _3_layer_double_inv_CT_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 // layer 3
 ldr.w \twiddle1, [\twiddle_ptr], #4
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa

 // layer 1
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle2, \tmp, \q, \qa

 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.macro _3_layer_double_inv_twist_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c0, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c1, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c2, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c3, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c4, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c5, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c6, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c7, \twiddle2, \tmp, \q, \qa
.endm
# input coefficients < 0.5q
.global invntt_fast_opt_m7
.type invntt_fast_opt_m7, %function
.align 2
invntt_fast_opt_m7:
 push {r4-r11, r14}
 vpush.w {s16-s23}
 poly         .req r0
 twiddle_ptr  .req r1
 poly0        .req r2
 poly1        .req r3
 poly2        .req r4
 poly3        .req r5
 poly4        .req r6
 poly5        .req r7
 poly6        .req r8
 poly7        .req r9
 twiddle1     .req r10
 twiddle2     .req r11
 q            .req r12
 // at the top of r12
 qa           .req r0
 // qa=2^a q;a=3; at the bottom of r12
 tmp          .req r14

 movt q, #3329

 ### LAYER 7+6+5+4
 .equ distance, 16
 .equ offset, 32
 .equ strincr, 64

 // pre-load twiddle factors to FPU registers
 vldm twiddle_ptr!, {s8-s22}

 add.w tmp, poly, #8*strincr
 vmov s8, tmp
1:
                                           // Instructions:    219
                                           // Expected cycles: 112
                                           // Expected IPC:    1.96
                                           //
                                           // ---------------------------------------------- cycle (expected) ----------------------------------------------->
                                           // 0                        25                       50                       75                       100
                                           // |------------------------|------------------------|------------------------|------------------------|-----------
        ldr.w r3, [r0, #48]                // *...............................................................................................................
        ldr.w r2, [r0, #52]                // *...............................................................................................................
        sadd16 r11, r3, r2               // .*..............................................................................................................
        ldr.w r4, [r0, #32]                // .*..............................................................................................................
        ssub16 r10, r3, r2               // ..*.............................................................................................................
        ldr.w r3, [r0, #56]                // ..*.............................................................................................................
        ldr.w r7, [r0, #40]                // ...*............................................................................................................
        ldr.w r8, [r0, #60]                // ...*............................................................................................................
        ssub16 r2, r3, r8                // ....*...........................................................................................................
        vmov r14, s10                    // ....*...........................................................................................................
        smulwb r9, r14, r2                 // .....*..........................................................................................................
        vmov s23, r0                       // .....*..........................................................................................................
        smulwt r5, r14, r2                 // ......*.........................................................................................................
        ldr.w r2, [r0, #36]                // ......*.........................................................................................................
        sadd16 r8, r3, r8                // .......*........................................................................................................
        ldr.w r6, [r0, #44]                // .......*........................................................................................................
        ssub16 r3, r4, r2                // ........*.......................................................................................................
        movw r0, #26632                    // ........*.......................................................................................................
        sadd16 r2, r4, r2                // .........*......................................................................................................
        smlabt r9, r9, r12, r0             // .........*......................................................................................................
        ssub16 r4, r7, r6                // ..........*.....................................................................................................
        smlabt r5, r5, r12, r0             // ..........*.....................................................................................................
        sadd16 r6, r7, r6                // ...........*....................................................................................................
        smulwb r7, r14, r4                 // ...........*....................................................................................................
        pkhtb r9, r5, r9, asr #16          // ............*...................................................................................................
        smulwt r5, r14, r4                 // ............*...................................................................................................
        ssub16 r4, r11, r8               // .............*..................................................................................................
        smlabt r14, r7, r12, r0            // .............*..................................................................................................
        uadd16 r7, r10, r9                 // ..............*.................................................................................................
        smlabt r5, r5, r12, r0             // ..............*.................................................................................................
        usub16 r9, r10, r9                 // ...............*................................................................................................
        vmov r10, s12                    // ...............*................................................................................................
        pkhtb r14, r5, r14, asr #16        // ................*...............................................................................................
        sadd16 r11, r11, r8              // .................*..............................................................................................
        smulwb r8, r10, r7                 // .................*..............................................................................................
        usub16 r5, r3, r14                 // ..................*.............................................................................................
        smulwt r10, r10, r7                // ..................*.............................................................................................
        uadd16 r3, r3, r14                 // ...................*............................................................................................
        smlabt r8, r8, r12, r0             // ...................*............................................................................................
        sadd16 r14, r2, r6               // ....................*...........................................................................................
        smlabt r7, r10, r12, r0            // ....................*...........................................................................................
        ssub16 r10, r2, r6               // .....................*..........................................................................................
        vmov r2, s13                     // .....................*..........................................................................................
        pkhtb r7, r7, r8, asr #16          // ......................*.........................................................................................
        smulwb r8, r2, r4                  // ......................*.........................................................................................
        uadd16 r6, r3, r7                  // .......................*........................................................................................
        smulwt r4, r2, r4                  // .......................*........................................................................................
        vmov r2, s16                       // ........................*.......................................................................................
        smlabt r8, r8, r12, r0             // ........................*.......................................................................................
        usub16 r7, r3, r7                  // .........................*......................................................................................
        smulwb r3, r2, r6                  // .........................*......................................................................................
        smulwt r6, r2, r6                  // ..........................*.....................................................................................
        sadd16 r2, r14, r11              // ...........................*....................................................................................
        smlabt r3, r3, r12, r0             // ...........................*....................................................................................
        ssub16 r11, r14, r11             // ............................*...................................................................................
        smlabt r6, r6, r12, r0             // ............................*...................................................................................
        smlabt r14, r4, r12, r0            // .............................*..................................................................................
        vmov r4, s19                       // .............................*..................................................................................
        pkhtb r3, r6, r3, asr #16          // ..............................*.................................................................................
        smulwb r6, r4, r11                 // ..............................*.................................................................................
        pkhtb r14, r14, r8, asr #16        // ...............................*................................................................................
        smulwt r4, r4, r11                 // ...............................*................................................................................
        ssub16 r8, r10, r14              // ................................*...............................................................................
        smlabt r6, r6, r12, r0             // ................................*...............................................................................
        vmov r11, s14                    // .................................*..............................................................................
        smlabt r4, r4, r12, r0             // .................................*..............................................................................
        vmov s0, r2                        // ..................................*.............................................................................
        smulwt r2, r11, r9                 // ..................................*.............................................................................
        smulwb r9, r11, r9                 // ...................................*............................................................................
        vmov r11, s20                      // ...................................*............................................................................
        pkhtb r4, r4, r6, asr #16          // ....................................*...........................................................................
        smulwb r6, r11, r7                 // ....................................*...........................................................................
        sadd16 r14, r10, r14             // .....................................*..........................................................................
        smulwt r11, r11, r7                // .....................................*..........................................................................
        vmov r7, s17                       // ......................................*.........................................................................
        smlabt r6, r6, r12, r0             // ......................................*.........................................................................
        vmov s1, r3                        // .......................................*........................................................................
        smlabt r11, r11, r12, r0           // .......................................*........................................................................
        smulwb r10, r7, r14                // ........................................*.......................................................................
        vmov r3, s21                       // ........................................*.......................................................................
        pkhtb r11, r11, r6, asr #16        // .........................................*......................................................................
        smlabt r6, r2, r12, r0             // .........................................*......................................................................
        vmov s5, r11                       // ..........................................*.....................................................................
        smulwt r2, r3, r8                  // ..........................................*.....................................................................
        smlabt r11, r9, r12, r0            // ...........................................*....................................................................
        vmov r9, s18                       // ...........................................*....................................................................
        smlabt r2, r2, r12, r0             // ............................................*...................................................................
        vmov s4, r4                        // ............................................*...................................................................
        smulwb r4, r3, r8                  // .............................................*..................................................................
        pkhtb r3, r6, r11, asr #16         // ..............................................*.................................................................
        smulwt r14, r7, r14                // ..............................................*.................................................................
        uadd16 r8, r5, r3                  // ...............................................*................................................................
        smlabt r7, r4, r12, r0             // ...............................................*................................................................
        usub16 r11, r5, r3                 // ................................................*...............................................................
        smulwb r6, r9, r8                  // ................................................*...............................................................
        vmov r4, s22                       // .................................................*..............................................................
        smulwt r5, r9, r8                  // .................................................*..............................................................
        pkhtb r3, r2, r7, asr #16          // ..................................................*.............................................................
        smlabt r6, r6, r12, r0             // ..................................................*.............................................................
        vmov r9, s23                       // ...................................................*............................................................
        smlabt r2, r10, r12, r0            // ...................................................*............................................................
        ldr.w r7, [r9, #0]                 // ....................................................*...........................................................
        ldr.w r10, [r9, #4]                // ....................................................*...........................................................
        ssub16 r8, r7, r10               // .....................................................*..........................................................
        smlabt r14, r14, r12, r0           // .....................................................*..........................................................
        sadd16 r7, r7, r10               // ......................................................*.........................................................
        smulwt r10, r4, r11                // ......................................................*.........................................................
        pkhtb r14, r14, r2, asr #16        // .......................................................*........................................................
        smlabt r5, r5, r12, r0             // .......................................................*........................................................
        vmov s6, r3                        // ........................................................*.......................................................
        ldr.w r3, [r9, #12]                // ........................................................*.......................................................
        pkhtb r5, r5, r6, asr #16          // .........................................................*......................................................
        ldr.w r2, [r9, #8]                 // .........................................................*......................................................
        vmov s3, r5                        // ..........................................................*.....................................................
        smulwb r5, r4, r11                 // ..........................................................*.....................................................
        ssub16 r6, r2, r3                // ...........................................................*....................................................
        smlabt r11, r10, r12, r0           // ...........................................................*....................................................
        vmov r4, s10                     // ............................................................*...................................................
        smlabt r5, r5, r12, r0             // ............................................................*...................................................
        sadd16 r3, r2, r3                // .............................................................*..................................................
        smulwb r2, r4, r6                  // .............................................................*..................................................
        movw r0, #26632                    // ..............................................................*.................................................
        smulwt r6, r4, r6                  // ..............................................................*.................................................
        pkhtb r5, r11, r5, asr #16         // ...............................................................*................................................
        smlabt r2, r2, r12, r0             // ...............................................................*................................................
        ssub16 r11, r7, r3               // ................................................................*...............................................
        smlabt r6, r6, r12, r0             // ................................................................*...............................................
        sadd16 r7, r7, r3                // .................................................................*..............................................
        vmov s7, r5                        // .................................................................*..............................................
        pkhtb r6, r6, r2, asr #16          // ..................................................................*.............................................
        ldr.w r10, [r9, #20]               // ..................................................................*.............................................
        ldr.w r5, [r9, #24]                // ...................................................................*............................................
        ldr.w r2, [r9, #28]                // ...................................................................*............................................
        ssub16 r3, r5, r2                // ....................................................................*...........................................
        vmov s2, r14                       // ....................................................................*...........................................
        sadd16 r5, r5, r2                // .....................................................................*..........................................
        ldr.w r14, [r9, #16]               // .....................................................................*..........................................
        sadd16 r2, r14, r10              // ......................................................................*.........................................
        smulwb r9, r4, r3                  // ......................................................................*.........................................
        ssub16 r14, r14, r10             // .......................................................................*........................................
        smulwt r4, r4, r3                  // .......................................................................*........................................
        usub16 r10, r8, r6                 // ........................................................................*.......................................
        smlabt r9, r9, r12, r0             // ........................................................................*.......................................
        uadd16 r3, r8, r6                  // .........................................................................*......................................
        smlabt r4, r4, r12, r0             // .........................................................................*......................................
        ssub16 r8, r2, r5                // ..........................................................................*.....................................
        vmov r6, s13                     // ..........................................................................*.....................................
        sadd16 r5, r2, r5                // ...........................................................................*....................................
        smulwt r2, r6, r8                  // ...........................................................................*....................................
        pkhtb r4, r4, r9, asr #16          // ............................................................................*...................................
        smulwb r9, r6, r8                  // ............................................................................*...................................
        ssub16 r6, r7, r5                // .............................................................................*..................................
        smlabt r8, r2, r12, r0             // .............................................................................*..................................
        sadd16 r2, r7, r5                // ..............................................................................*.................................
        smlabt r7, r9, r12, r0             // ..............................................................................*.................................
        usub16 r9, r14, r4                 // ...............................................................................*................................
        vmov r5, s14                     // ...............................................................................*................................
        uadd16 r14, r14, r4                // ................................................................................*...............................
        smulwb r4, r5, r9                  // ................................................................................*...............................
        pkhtb r8, r8, r7, asr #16          // .................................................................................*..............................
        smulwt r9, r5, r9                  // .................................................................................*..............................
        vmov r5, s12                     // ..................................................................................*.............................
        smlabt r7, r4, r12, r0             // ..................................................................................*.............................
        sadd16 r4, r11, r8               // ...................................................................................*............................
        ssub16 r8, r11, r8               // ....................................................................................*...........................
        smlabt r9, r9, r12, r0             // ....................................................................................*...........................
        smulwb r11, r5, r14                // .....................................................................................*..........................
        pkhtb r9, r9, r7, asr #16          // ......................................................................................*.........................
        smulwt r14, r5, r14                // ......................................................................................*.........................
        uadd16 r7, r10, r9                 // .......................................................................................*........................
        smlabt r5, r11, r12, r0            // .......................................................................................*........................
        usub16 r9, r10, r9                 // ........................................................................................*.......................
        smlabt r14, r14, r12, r0           // ........................................................................................*.......................
        vmov r10, s6                       // .........................................................................................*......................
        vmov r0, s23                       // .........................................................................................*......................
        uadd16 r11, r8, r10                // ..........................................................................................*.....................
        str.w r11, [r0, #24]               // ..........................................................................................*.....................
        usub16 r11, r8, r10                // ...........................................................................................*....................
        str.w r11, [r0, #56]               // ...........................................................................................*....................
        pkhtb r5, r14, r5, asr #16         // ............................................................................................*...................
        vmov r8, s3                        // ............................................................................................*...................
        uadd16 r14, r7, r8                 // .............................................................................................*..................
        str.w r14, [r0, #12]               // .............................................................................................*..................
        usub16 r14, r7, r8                 // ..............................................................................................*.................
        vmov r7, s1                        // ..............................................................................................*.................
        uadd16 r10, r3, r5                 // ...............................................................................................*................
        vmov r8, s4                        // ...............................................................................................*................
        usub16 r11, r6, r8                 // ................................................................................................*...............
        str.w r14, [r0, #44]               // ................................................................................................*...............
        usub16 r3, r3, r5                  // .................................................................................................*..............
        str.w r11, [r0, #48]               // .................................................................................................*..............
        uadd16 r8, r6, r8                  // ..................................................................................................*.............
        vmov r14, s7                       // ..................................................................................................*.............
        uadd16 r11, r9, r14                // ...................................................................................................*............
        str.w r11, [r0, #28]               // ...................................................................................................*............
        usub16 r9, r9, r14                 // ....................................................................................................*...........
        str.w r9, [r0, #60]                // ....................................................................................................*...........
        usub16 r5, r10, r7                 // .....................................................................................................*..........
        str.w r5, [r0, #36]                // .....................................................................................................*..........
        uadd16 r10, r10, r7                // ......................................................................................................*.........
        vmov r7, s0                        // ......................................................................................................*.........
        uadd16 r11, r2, r7                 // .......................................................................................................*........
        str.w r11, [r0], #64               // .......................................................................................................*........
        str.w r8, [r0, #-48]               // ........................................................................................................*.......
        vmov r8, s5                        // ........................................................................................................*.......
        uadd16 r5, r3, r8                  // .........................................................................................................*......
        str.w r10, [r0, #-60]              // .........................................................................................................*......
        usub16 r11, r3, r8                 // ..........................................................................................................*.....
        vmov r8, s2                        // ..........................................................................................................*.....
        uadd16 r6, r4, r8                  // ...........................................................................................................*....
        str.w r6, [r0, #-56]               // ...........................................................................................................*....
        usub16 r6, r4, r8                  // ............................................................................................................*...
        str.w r5, [r0, #-44]               // ............................................................................................................*...
        usub16 r10, r2, r7                 // .............................................................................................................*..
        str.w r11, [r0, #-12]              // .............................................................................................................*..
        vmov r14, s8                       // ..............................................................................................................*.
        str.w r6, [r0, #-24]               // ..............................................................................................................*.
        str.w r10, [r0, #-32]              // ...............................................................................................................*
        cmp.w r0, r14                      // ...............................................................................................................*

                                            // ---------------------------------------------- cycle (expected) ----------------------------------------------->
                                            // 0                        25                       50                       75                       100
                                            // |------------------------|------------------------|------------------------|------------------------|-----------
        // vmov s23, r0                     // .....*..........................................................................................................
        // ldr.w r2, [r0, #32]              // .*..............................................................................................................
        // ldr.w r3, [r0, #16/4+32]         // ......*.........................................................................................................
        // ldr.w r4, [r0, #2*16/4+32]       // ...*............................................................................................................
        // ldr.w r5, [r0, #3*16/4+32]       // .......*........................................................................................................
        // ldr.w r6, [r0, #16+32]           // *...............................................................................................................
        // ldr.w r7, [r0, #5*16/4+32]       // *...............................................................................................................
        // ldr.w r8, [r0, #6*16/4+32]       // ..*.............................................................................................................
        // ldr.w r9, [r0, #7*16/4+32]       // ...*............................................................................................................
        // movw r0, #26632                  // ........*.......................................................................................................
        // sadd16 r14, r2, r3             // .........*......................................................................................................
        // ssub16 r3, r2, r3              // ........*.......................................................................................................
        // sadd16 r11, r4, r5             // ...........*....................................................................................................
        // ssub16 r5, r4, r5              // ..........*.....................................................................................................
        // sadd16 r2, r6, r7              // .*..............................................................................................................
        // ssub16 r7, r6, r7              // ..*.............................................................................................................
        // sadd16 r4, r8, r9              // .......*........................................................................................................
        // ssub16 r9, r8, r9              // ....*...........................................................................................................
        // sadd16 r8, r14, r11            // ....................*...........................................................................................
        // ssub16 r11, r14, r11           // .....................*..........................................................................................
        // sadd16 r6, r2, r4              // .................*..............................................................................................
        // ssub16 r4, r2, r4              // .............*..................................................................................................
        // vmov r10, s10                  // ....*...........................................................................................................
        // smulwb r14, r10, r5              // ...........*....................................................................................................
        // smulwt r5, r10, r5               // ............*...................................................................................................
        // smlabt r14, r14, r12, r0         // .............*..................................................................................................
        // smlabt r5, r5, r12, r0           // ..............*.................................................................................................
        // pkhtb r14, r5, r14, asr #16      // ................*...............................................................................................
        // usub16 r5, r3, r14               // ..................*.............................................................................................
        // uadd16 r3, r3, r14               // ...................*............................................................................................
        // smulwb r14, r10, r9              // .....*..........................................................................................................
        // smulwt r9, r10, r9               // ......*.........................................................................................................
        // smlabt r14, r14, r12, r0         // .........*......................................................................................................
        // smlabt r9, r9, r12, r0           // ..........*.....................................................................................................
        // pkhtb r14, r9, r14, asr #16      // ............*...................................................................................................
        // usub16 r9, r7, r14               // ...............*................................................................................................
        // uadd16 r7, r7, r14               // ..............*.................................................................................................
        // sadd16 r2, r8, r6              // ...........................*....................................................................................
        // ssub16 r6, r8, r6              // ............................*...................................................................................
        // vmov r10, s12                  // ...............*................................................................................................
        // smulwb r14, r10, r7              // .................*..............................................................................................
        // smulwt r7, r10, r7               // ..................*.............................................................................................
        // smlabt r14, r14, r12, r0         // ...................*............................................................................................
        // smlabt r7, r7, r12, r0           // ....................*...........................................................................................
        // pkhtb r14, r7, r14, asr #16      // ......................*.........................................................................................
        // usub16 r7, r3, r14               // .........................*......................................................................................
        // uadd16 r3, r3, r14               // .......................*........................................................................................
        // vmov r10, s13                  // .....................*..........................................................................................
        // smulwb r14, r10, r4              // ......................*.........................................................................................
        // smulwt r4,  r10, r4              // .......................*........................................................................................
        // smlabt r14, r14, r12, r0         // ........................*.......................................................................................
        // smlabt r4, r4, r12, r0           // .............................*..................................................................................
        // pkhtb r14, r4, r14, asr #16      // ...............................*................................................................................
        // ssub16 r8, r11, r14            // ................................*...............................................................................
        // sadd16 r4, r11, r14            // .....................................*..........................................................................
        // vmov r10, s14                  // .................................*..............................................................................
        // smulwb r14, r10, r9              // ...................................*............................................................................
        // smulwt r9, r10, r9               // ..................................*.............................................................................
        // smlabt r14, r14, r12, r0         // ...........................................*....................................................................
        // smlabt r9, r9, r12, r0           // .........................................*......................................................................
        // pkhtb r14, r9, r14, asr #16      // ..............................................*.................................................................
        // usub16 r9, r5, r14               // ................................................*...............................................................
        // uadd16 r5, r5, r14               // ...............................................*................................................................
        // vmov r11, s16                    // ........................*.......................................................................................
        // smulwb r14, r11, r3              // .........................*......................................................................................
        // smulwt r3,   r11, r3             // ..........................*.....................................................................................
        // smlabt r14, r14, r12, r0         // ...........................*....................................................................................
        // smlabt r3, r3, r12, r0           // ............................*...................................................................................
        // pkhtb r3, r3, r14, asr #16       // ..............................*.................................................................................
        // vmov r10, s17                    // ......................................*.........................................................................
        // vmov r11, s18                    // ...........................................*....................................................................
        // smulwb r14, r10, r4              // ........................................*.......................................................................
        // smulwt r4,   r10, r4             // ..............................................*.................................................................
        // smlabt r14, r14, r12, r0         // ...................................................*............................................................
        // smlabt r4, r4, r12, r0           // .....................................................*..........................................................
        // pkhtb r4, r4, r14, asr #16       // .......................................................*........................................................
        // smulwb r14, r11, r5              // ................................................*...............................................................
        // smulwt r5,   r11, r5             // .................................................*..............................................................
        // smlabt r14, r14, r12, r0         // ..................................................*.............................................................
        // smlabt r5, r5, r12, r0           // .......................................................*........................................................
        // pkhtb r5, r5, r14, asr #16       // .........................................................*......................................................
        // vmov r10, s19                    // .............................*..................................................................................
        // vmov r11, s20                    // ...................................*............................................................................
        // smulwb r14, r10, r6              // ..............................*.................................................................................
        // smulwt r6,   r10, r6             // ...............................*................................................................................
        // smlabt r14, r14, r12, r0         // ................................*...............................................................................
        // smlabt r6, r6, r12, r0           // .................................*..............................................................................
        // pkhtb r6, r6, r14, asr #16       // ....................................*...........................................................................
        // smulwb r14, r11, r7              // ....................................*...........................................................................
        // smulwt r7,   r11, r7             // .....................................*..........................................................................
        // smlabt r14, r14, r12, r0         // ......................................*.........................................................................
        // smlabt r7, r7, r12, r0           // .......................................*........................................................................
        // pkhtb r7, r7, r14, asr #16       // .........................................*......................................................................
        // vmov r10, s21                    // ........................................*.......................................................................
        // vmov r11, s22                    // .................................................*..............................................................
        // smulwb r14, r10, r8              // .............................................*..................................................................
        // smulwt r8,   r10, r8             // ..........................................*.....................................................................
        // smlabt r14, r14, r12, r0         // ...............................................*................................................................
        // smlabt r8, r8, r12, r0           // ............................................*...................................................................
        // pkhtb r8, r8, r14, asr #16       // ..................................................*.............................................................
        // smulwb r14, r11, r9              // ..........................................................*.....................................................
        // smulwt r9,   r11, r9             // ......................................................*.........................................................
        // smlabt r14, r14, r12, r0         // ............................................................*...................................................
        // smlabt r9, r9, r12, r0           // ...........................................................*....................................................
        // pkhtb r9, r9, r14, asr #16       // ...............................................................*................................................
        // vmov s0, r2                      // ..................................*.............................................................................
        // vmov s1, r3                      // .......................................*........................................................................
        // vmov s2, r4                      // ....................................................................*...........................................
        // vmov s3, r5                      // ..........................................................*.....................................................
        // vmov s4, r6                      // ............................................*...................................................................
        // vmov s5, r7                      // ..........................................*.....................................................................
        // vmov s6, r8                      // ........................................................*.......................................................
        // vmov s7, r9                      // .................................................................*..............................................
        // vmov r0, s23                     // ...................................................*............................................................
        // ldr.w r2, [r0, #0]               // ....................................................*...........................................................
        // ldr.w r3, [r0, #16/4]            // ....................................................*...........................................................
        // ldr.w r4, [r0, #2*16/4]          // .........................................................*......................................................
        // ldr.w r5, [r0, #3*16/4]          // ........................................................*.......................................................
        // ldr.w r6, [r0, #16]              // .....................................................................*..........................................
        // ldr.w r7, [r0, #5*16/4]          // ..................................................................*.............................................
        // ldr.w r8, [r0, #6*16/4]          // ...................................................................*............................................
        // ldr.w r9, [r0, #7*16/4]          // ...................................................................*............................................
        // movw r0, #26632                  // ..............................................................*.................................................
        // sadd16 r14, r2, r3             // ......................................................*.........................................................
        // ssub16 r3, r2, r3              // .....................................................*..........................................................
        // sadd16 r11, r4, r5             // .............................................................*..................................................
        // ssub16 r5, r4, r5              // ...........................................................*....................................................
        // sadd16 r2, r6, r7              // ......................................................................*.........................................
        // ssub16 r7, r6, r7              // .......................................................................*........................................
        // sadd16 r4, r8, r9              // .....................................................................*..........................................
        // ssub16 r9, r8, r9              // ....................................................................*...........................................
        // sadd16 r8, r14, r11            // .................................................................*..............................................
        // ssub16 r11, r14, r11           // ................................................................*...............................................
        // sadd16 r6, r2, r4              // ...........................................................................*....................................
        // ssub16 r4, r2, r4              // ..........................................................................*.....................................
        // vmov r10, s10                  // ............................................................*...................................................
        // smulwb r14, r10, r5              // .............................................................*..................................................
        // smulwt r5, r10, r5               // ..............................................................*.................................................
        // smlabt r14, r14, r12, r0         // ...............................................................*................................................
        // smlabt r5, r5, r12, r0           // ................................................................*...............................................
        // pkhtb r14, r5, r14, asr #16      // ..................................................................*.............................................
        // usub16 r5, r3, r14               // ........................................................................*.......................................
        // uadd16 r3, r3, r14               // .........................................................................*......................................
        // smulwb r14, r10, r9              // ......................................................................*.........................................
        // smulwt r9, r10, r9               // .......................................................................*........................................
        // smlabt r14, r14, r12, r0         // ........................................................................*.......................................
        // smlabt r9, r9, r12, r0           // .........................................................................*......................................
        // pkhtb r14, r9, r14, asr #16      // ............................................................................*...................................
        // usub16 r9, r7, r14               // ...............................................................................*................................
        // uadd16 r7, r7, r14               // ................................................................................*...............................
        // sadd16 r2, r8, r6              // ..............................................................................*.................................
        // ssub16 r6, r8, r6              // .............................................................................*..................................
        // vmov r10, s12                  // ..................................................................................*.............................
        // smulwb r14, r10, r7              // .....................................................................................*..........................
        // smulwt r7, r10, r7               // ......................................................................................*.........................
        // smlabt r14, r14, r12, r0         // .......................................................................................*........................
        // smlabt r7, r7, r12, r0           // ........................................................................................*.......................
        // pkhtb r14, r7, r14, asr #16      // ............................................................................................*...................
        // usub16 r7, r3, r14               // .................................................................................................*..............
        // uadd16 r3, r3, r14               // ...............................................................................................*................
        // vmov r10, s13                  // ..........................................................................*.....................................
        // smulwb r14, r10, r4              // ............................................................................*...................................
        // smulwt r4,  r10, r4              // ...........................................................................*....................................
        // smlabt r14, r14, r12, r0         // ..............................................................................*.................................
        // smlabt r4, r4, r12, r0           // .............................................................................*..................................
        // pkhtb r14, r4, r14, asr #16      // .................................................................................*..............................
        // ssub16 r8, r11, r14            // ....................................................................................*...........................
        // sadd16 r4, r11, r14            // ...................................................................................*............................
        // vmov r10, s14                  // ...............................................................................*................................
        // smulwb r14, r10, r9              // ................................................................................*...............................
        // smulwt r9, r10, r9               // .................................................................................*..............................
        // smlabt r14, r14, r12, r0         // ..................................................................................*.............................
        // smlabt r9, r9, r12, r0           // ....................................................................................*...........................
        // pkhtb r14, r9, r14, asr #16      // ......................................................................................*.........................
        // usub16 r9, r5, r14               // ........................................................................................*.......................
        // uadd16 r5, r5, r14               // .......................................................................................*........................
        // vmov r0, s23                     // .........................................................................................*......................
        // vmov r11, s1                     // ..............................................................................................*.................
        // uadd16 r14, r3, r11              // ......................................................................................................*.........
        // usub16 r3, r3, r11               // .....................................................................................................*..........
        // str.w r14, [r0, #1*16/4]         // .........................................................................................................*......
        // str.w r3, [r0, #1*16/4+32]       // .....................................................................................................*..........
        // vmov r11, s3                     // ............................................................................................*...................
        // uadd16 r14, r5, r11              // .............................................................................................*..................
        // usub16 r5, r5, r11               // ..............................................................................................*.................
        // str.w r14, [r0, #3*16/4]         // .............................................................................................*..................
        // str.w r5, [r0, #3*16/4+32]       // ................................................................................................*...............
        // vmov r11, s5                     // ........................................................................................................*.......
        // uadd16 r14, r7, r11              // .........................................................................................................*......
        // usub16 r7, r7, r11               // ..........................................................................................................*.....
        // str.w r14, [r0, #5*16/4]         // ............................................................................................................*...
        // str.w r7, [r0, #5*16/4+32]       // .............................................................................................................*..
        // vmov r11, s7                     // ..................................................................................................*.............
        // uadd16 r14, r9, r11              // ...................................................................................................*............
        // usub16 r9, r9, r11               // ....................................................................................................*...........
        // str.w r14, [r0, #7*16/4]         // ...................................................................................................*............
        // str.w r9, [r0, #7*16/4+32]       // ....................................................................................................*...........
        // vmov r5, s2                      // ..........................................................................................................*.....
        // uadd16 r14, r4, r5               // ...........................................................................................................*....
        // usub16 r11, r4, r5               // ............................................................................................................*...
        // str.w r14, [r0, #2*16/4]         // ...........................................................................................................*....
        // str.w r11, [r0, #2*16/4+32]      // ..............................................................................................................*.
        // vmov r7, s4                      // ...............................................................................................*................
        // uadd16 r14, r6, r7               // ..................................................................................................*.............
        // usub16 r11, r6, r7               // ................................................................................................*...............
        // str.w r14, [r0, #4*16/4]         // ........................................................................................................*.......
        // str.w r11, [r0, #4*16/4+32]      // .................................................................................................*..............
        // vmov r9, s6                      // .........................................................................................*......................
        // uadd16 r14, r8, r9               // ..........................................................................................*.....................
        // usub16 r11, r8, r9               // ...........................................................................................*....................
        // str.w r14, [r0, #6*16/4]         // ..........................................................................................*.....................
        // str.w r11, [r0, #6*16/4+32]      // ...........................................................................................*....................
        // vmov r3, s0                      // ......................................................................................................*.........
        // uadd16 r14, r2, r3               // .......................................................................................................*........
        // usub16 r11, r2, r3               // .............................................................................................................*..
        // str.w r11, [r0, #32]             // ...............................................................................................................*
        // str.w r14, [r0], #64             // .......................................................................................................*........
        // vmov r14, s8                     // ..............................................................................................................*.
        // cmp.w r0, r14                    // ...............................................................................................................*

        bne 1b

 sub.w poly, #8*strincr

 ### LAYER 3+2+1

 .equ distance2, distance*16
 .equ strincr2, 4

 // ITER 0
        layer567_first_start:
                                            // Instructions:    169
                                            // Expected cycles: 100
                                            // Expected IPC:    1.69
                                            //
                                            // ---------------------------------------- cycle (expected) ----------------------------------------->
                                            // 0                        25                       50                       75
                                            // |------------------------|------------------------|------------------------|
        ldr.w r7, [r0, #320]                // *...................................................................................................
        movw r5, #44984                     // *...................................................................................................
        movt r5, #19                        // .*..................................................................................................
        ldr.w r14, [r0, #384]               // .*..................................................................................................
        ldr.w r3, [r0, #128]                // ..*.................................................................................................
        vmov s6, r0                         // ..*.................................................................................................
        smulwt r2, r5, r14                  // ...*................................................................................................
        ldr.w r9, [r0, #448]                // ...*................................................................................................
        ldr.w r11, [r0, #0]                 // ....*...............................................................................................
        smulwb r8, r5, r14                  // ....*...............................................................................................
        ldr.w r6, [r0, #192]                // .....*..............................................................................................
        smulwb r14, r5, r9                  // .....*..............................................................................................
        smulwt r9, r5, r9                   // ......*.............................................................................................
        ldr.w r10, [r0, #256]               // ......*.............................................................................................
        ldr.w r4, [r0, #64]                 // .......*............................................................................................
        movw r0, #26632                     // .......*............................................................................................
        vldr s0, [r1, #0]                   // ........*...........................................................................................
        smlabt r14, r14, r12, r0            // ........*...........................................................................................
        vldr s2, [r1, #8]                   // .........*..........................................................................................
        smlabt r9, r9, r12, r0              // .........*..........................................................................................
        vldr s4, [r1, #16]                  // ..........*.........................................................................................
        smlabt r8, r8, r12, r0              // ..........*.........................................................................................
        pkhtb r14, r9, r14, asr #16         // ...........*........................................................................................
        smlabt r9, r2, r12, r0              // ...........*........................................................................................
        vldr s1, [r1, #4]                   // ............*.......................................................................................
        smulwb r2, r5, r10                  // ............*.......................................................................................
        pkhtb r9, r9, r8, asr #16           // .............*......................................................................................
        smulwt r8, r5, r10                  // .............*......................................................................................
        smlabt r2, r2, r12, r0              // ..............*.....................................................................................
        smlabt r10, r8, r12, r0             // ...............*....................................................................................
        smulwb r8, r5, r11                  // ................*...................................................................................
        smulwt r11, r5, r11                 // .................*..................................................................................
        vldr s3, [r1, #12]                  // .................*..................................................................................
        pkhtb r2, r10, r2, asr #16          // ..................*.................................................................................
        smlabt r8, r8, r12, r0              // ..................*.................................................................................
        smlabt r11, r11, r12, r0            // ...................*................................................................................
        vldr s5, [r1, #20]                  // ...................*................................................................................
        add r1, r1, #24                     // ....................*...............................................................................
        smulwb r10, r5, r4                  // ....................*...............................................................................
        pkhtb r11, r11, r8, asr #16         // .....................*..............................................................................
        smulwt r4, r5, r4                   // .....................*..............................................................................
        sadd16 r8, r9, r14                // ......................*.............................................................................
        smlabt r10, r10, r12, r0            // ......................*.............................................................................
        ssub16 r9, r9, r14                // .......................*............................................................................
        smlabt r14, r4, r12, r0             // .......................*............................................................................
        smulwb r4, r5, r7                   // ........................*...........................................................................
        pkhtb r14, r14, r10, asr #16        // .........................*..........................................................................
        smulwt r10, r5, r7                  // .........................*..........................................................................
        ssub16 r7, r11, r14               // ..........................*.........................................................................
        smlabt r4, r4, r12, r0              // ..........................*.........................................................................
        sadd16 r11, r11, r14              // ...........................*........................................................................
        smlabt r14, r10, r12, r0            // ...........................*........................................................................
        smulwt r10, r5, r6                  // ............................*.......................................................................
        pkhtb r14, r14, r4, asr #16         // .............................*......................................................................
        smulwb r6, r5, r6                   // .............................*......................................................................
        smulwt r4, r5, r3                   // ..............................*.....................................................................
        smulwb r3, r5, r3                   // ...............................*....................................................................
        ssub16 r5, r2, r14                // ................................*...................................................................
        smlabt r10, r10, r12, r0            // ................................*...................................................................
        sadd16 r2, r2, r14                // .................................*..................................................................
        smlabt r6, r6, r12, r0              // .................................*..................................................................
        ssub16 r14, r2, r8                // ..................................*.................................................................
        smlabt r3, r3, r12, r0              // ..................................*.................................................................
        sadd16 r8, r2, r8                 // ...................................*................................................................
        smlabt r2, r4, r12, r0              // ...................................*................................................................
        pkhtb r6, r10, r6, asr #16          // ....................................*...............................................................
        vmov r4, s1                       // ....................................*...............................................................
        pkhtb r2, r2, r3, asr #16           // .....................................*..............................................................
        ssub16 r10, r2, r6                // ......................................*.............................................................
        smulwb r3, r4, r9                   // ......................................*.............................................................
        sadd16 r2, r2, r6                 // .......................................*............................................................
        smulwt r6, r4, r9                   // .......................................*............................................................
        sadd16 r9, r11, r2                // ........................................*...........................................................
        smlabt r3, r3, r12, r0              // ........................................*...........................................................
        ssub16 r2, r11, r2                // .........................................*..........................................................
        smlabt r6, r6, r12, r0              // .........................................*..........................................................
        smulwb r11, r4, r10                 // ..........................................*.........................................................
        pkhtb r6, r6, r3, asr #16           // ...........................................*........................................................
        smulwt r10, r4, r10                 // ...........................................*........................................................
        uadd16 r4, r5, r6                   // ............................................*.......................................................
        smlabt r11, r11, r12, r0            // ............................................*.......................................................
        smlabt r3, r10, r12, r0             // .............................................*......................................................
        vmov r10, s3                      // .............................................*......................................................
        usub16 r5, r5, r6                   // ..............................................*.....................................................
        smulwb r6, r10, r4                  // ..............................................*.....................................................
        pkhtb r3, r3, r11, asr #16          // ...............................................*....................................................
        smulwt r4, r10, r4                  // ...............................................*....................................................
        smlabt r6, r6, r12, r0              // ................................................*...................................................
        vmov r10, s4                      // ................................................*...................................................
        usub16 r11, r7, r3                  // .................................................*..................................................
        smlabt r4, r4, r12, r0              // .................................................*..................................................
        uadd16 r3, r7, r3                   // ..................................................*.................................................
        smulwb r7, r10, r14                 // ..................................................*.................................................
        pkhtb r6, r4, r6, asr #16           // ...................................................*................................................
        smulwt r14, r10, r14                // ...................................................*................................................
        uadd16 r4, r3, r6                   // ....................................................*...............................................
        smlabt r10, r7, r12, r0             // ....................................................*...............................................
        usub16 r7, r3, r6                   // .....................................................*..............................................
        ldr r3, [r1, #4]                    // .....................................................*..............................................
        ssub16 r6, r9, r8                 // ......................................................*.............................................
        smlabt r14, r14, r12, r0            // ......................................................*.............................................
        pkhtb r14, r14, r10, asr #16        // ........................................................*...........................................
        smulwt r10, r3, r4                  // ........................................................*...........................................
        sadd16 r9, r9, r8                 // .........................................................*..........................................
        smulwb r3, r3, r4                   // .........................................................*..........................................
        smlabt r8, r10, r12, r0             // ..........................................................*.........................................
        ldr r4, [r1, #20]                   // ..........................................................*.........................................
        sadd16 r10, r2, r14               // ...........................................................*........................................
        smlabt r3, r3, r12, r0              // ...........................................................*........................................
        ssub16 r2, r2, r14                // ............................................................*.......................................
        smulwb r14, r4, r7                  // ............................................................*.......................................
        smulwt r4, r4, r7                   // .............................................................*......................................
        pkhtb r3, r8, r3, asr #16           // ..............................................................*.....................................
        smlabt r7, r14, r12, r0             // ..............................................................*.....................................
        smlabt r14, r4, r12, r0             // ...............................................................*....................................
        vmov r4, s5                       // ...............................................................*....................................
        smulwb r8, r4, r5                   // ................................................................*...................................
        pkhtb r7, r14, r7, asr #16          // .................................................................*..................................
        smulwt r14, r4, r5                  // .................................................................*..................................
        smlabt r5, r8, r12, r0              // ..................................................................*.................................
        ldr r4, [r1], #8                    // ..................................................................*.................................
        smlabt r8, r14, r12, r0             // ...................................................................*................................
        smulwb r14, r4, r9                  // ....................................................................*...............................
        smulwt r9, r4, r9                   // .....................................................................*..............................
        ldr r4, [r1], #8                    // .....................................................................*..............................
        pkhtb r5, r8, r5, asr #16           // ......................................................................*.............................
        smlabt r8, r14, r12, r0             // ......................................................................*.............................
        smlabt r9, r9, r12, r0              // .......................................................................*............................
        smulwt r14, r4, r10                 // ........................................................................*...........................
        pkhtb r9, r9, r8, asr #16           // .........................................................................*..........................
        smulwb r4, r4, r10                  // .........................................................................*..........................
        ldr r10, [r1, #-4]                  // ..........................................................................*.........................
        smlabt r8, r14, r12, r0             // ..........................................................................*.........................
        uadd16 r14, r11, r5                 // ...........................................................................*........................
        smlabt r4, r4, r12, r0              // ...........................................................................*........................
        usub16 r5, r11, r5                  // ............................................................................*.......................
        smulwb r11, r10, r14                // ............................................................................*.......................
        smulwt r10, r10, r14                // .............................................................................*......................
        smlabt r11, r11, r12, r0            // ..............................................................................*.....................
        ldr r14, [r1], #8                   // ..............................................................................*.....................
        smlabt r10, r10, r12, r0            // ...............................................................................*....................
        pkhtb r4, r8, r4, asr #16           // ................................................................................*...................
        smulwb r8, r14, r6                  // ................................................................................*...................
        smulwt r6, r14, r6                  // .................................................................................*..................
        ldr r14, [r1, #4]                   // .................................................................................*..................
        pkhtb r11, r10, r11, asr #16        // ..................................................................................*.................
        smlabt r8, r8, r12, r0              // ..................................................................................*.................
        smulwt r10, r14, r5                 // ...................................................................................*................
        smulwb r14, r14, r5                 // ....................................................................................*...............
        smlabt r5, r6, r12, r0              // .....................................................................................*..............
        smlabt r6, r10, r12, r0             // ......................................................................................*.............
        ldr r10, [r1], #8                   // ......................................................................................*.............
        pkhtb r8, r5, r8, asr #16           // .......................................................................................*............
        smlabt r14, r14, r12, r0            // .......................................................................................*............
        smulwb r5, r10, r2                  // ........................................................................................*...........
        smulwt r2, r10, r2                  // .........................................................................................*..........
        smlabt r5, r5, r12, r0              // ..........................................................................................*.........
        smlabt r2, r2, r12, r0              // ...........................................................................................*........
        vmov r0, s6                         // ...........................................................................................*........
        str.w r7, [r0, #320]                // ............................................................................................*.......
        str.w r3, [r0, #64]                 // .............................................................................................*......
        pkhtb r3, r6, r14, asr #16          // ..............................................................................................*.....
        str.w r9, [r0], #4                  // ..............................................................................................*.....
        pkhtb r5, r2, r5, asr #16           // ...............................................................................................*....
        str.w r5, [r0, #380]                // ...............................................................................................*....
        str.w r8, [r0, #252]                // ................................................................................................*...
        str.w r11, [r0, #188]               // .................................................................................................*..
        str.w r3, [r0, #444]                // ..................................................................................................*.
        str.w r4, [r0, #124]                // ...................................................................................................*

                                            // ---------------------------------------- cycle (expected) ----------------------------------------->
                                            // 0                        25                       50                       75
                                            // |------------------------|------------------------|------------------------|------------------------
        // vmov s6, r0                      // ..*.................................................................................................
        // ldr.w r2, [r0, #0]               // ....*...............................................................................................
        // ldr.w r3, [r0, #64]              // .......*............................................................................................
        // ldr.w r4, [r0, #128]             // ..*.................................................................................................
        // ldr.w r5, [r0, #192]             // .....*..............................................................................................
        // ldr.w r6, [r0, #256]             // ......*.............................................................................................
        // ldr.w r7, [r0, #320]             // *...................................................................................................
        // ldr.w r8, [r0, #384]             // .*..................................................................................................
        // ldr.w r9, [r0, #448]             // ...*................................................................................................
        // vldr s0, [r1, #0]                // ........*...........................................................................................
        // vldr s1, [r1, #4]                // ............*.......................................................................................
        // vldr s2, [r1, #8]                // .........*..........................................................................................
        // vldr s3, [r1, #12]               // .................*..................................................................................
        // vldr s4, [r1, #16]               // ..........*.........................................................................................
        // vldr s5, [r1, #20]               // ...................*................................................................................
        // add r1, r1, #24                  // ....................*...............................................................................
        // movw r0, #26632                  // .......*............................................................................................
        // movw r10, #44984                 // *...................................................................................................
        // movt r10, #19                    // .*..................................................................................................
        // smulwb r14, r10, r2              // ................*...................................................................................
        // smulwt r2, r10, r2               // .................*..................................................................................
        // smlabt r14, r14, r12, r0         // ..................*.................................................................................
        // smlabt r2, r2, r12, r0           // ...................*................................................................................
        // pkhtb r2, r2, r14, asr #16       // .....................*..............................................................................
        // smulwb r14, r10, r3              // ....................*...............................................................................
        // smulwt r3, r10, r3               // .....................*..............................................................................
        // smlabt r14, r14, r12, r0         // ......................*.............................................................................
        // smlabt r3, r3, r12, r0           // .......................*............................................................................
        // pkhtb r3, r3, r14, asr #16       // .........................*..........................................................................
        // smulwb r14, r10, r4              // ...............................*....................................................................
        // smulwt r4, r10, r4               // ..............................*.....................................................................
        // smlabt r14, r14, r12, r0         // ..................................*.................................................................
        // smlabt r4, r4, r12, r0           // ...................................*................................................................
        // pkhtb r4, r4, r14, asr #16       // .....................................*..............................................................
        // smulwb r14, r10, r5              // .............................*......................................................................
        // smulwt r5, r10, r5               // ............................*.......................................................................
        // smlabt r14, r14, r12, r0         // .................................*..................................................................
        // smlabt r5, r5, r12, r0           // ................................*...................................................................
        // pkhtb r5, r5, r14, asr #16       // ....................................*...............................................................
        // smulwb r14, r10, r6              // ............*.......................................................................................
        // smulwt r6, r10, r6               // .............*......................................................................................
        // smlabt r14, r14, r12, r0         // ..............*.....................................................................................
        // smlabt r6, r6, r12, r0           // ...............*....................................................................................
        // pkhtb r6, r6, r14, asr #16       // ..................*.................................................................................
        // smulwb r14, r10, r7              // ........................*...........................................................................
        // smulwt r7, r10, r7               // .........................*..........................................................................
        // smlabt r14, r14, r12, r0         // ..........................*.........................................................................
        // smlabt r7, r7, r12, r0           // ...........................*........................................................................
        // pkhtb r7, r7, r14, asr #16       // .............................*......................................................................
        // smulwb r14, r10, r8              // ....*...............................................................................................
        // smulwt r8, r10, r8               // ...*................................................................................................
        // smlabt r14, r14, r12, r0         // ..........*.........................................................................................
        // smlabt r8, r8, r12, r0           // ...........*........................................................................................
        // pkhtb r8, r8, r14, asr #16       // .............*......................................................................................
        // smulwb r14, r10, r9              // .....*..............................................................................................
        // smulwt r9, r10, r9               // ......*.............................................................................................
        // smlabt r14, r14, r12, r0         // ........*...........................................................................................
        // smlabt r9, r9, r12, r0           // .........*..........................................................................................
        // pkhtb r9, r9, r14, asr #16       // ...........*........................................................................................
        // sadd16 r14, r2, r3             // ...........................*........................................................................
        // ssub16 r3, r2, r3              // ..........................*.........................................................................
        // sadd16 r11, r4, r5             // .......................................*............................................................
        // ssub16 r5, r4, r5              // ......................................*.............................................................
        // sadd16 r2, r6, r7              // .................................*..................................................................
        // ssub16 r7, r6, r7              // ................................*...................................................................
        // sadd16 r4, r8, r9              // ......................*.............................................................................
        // ssub16 r9, r8, r9              // .......................*............................................................................
        // sadd16 r8, r14, r11            // ........................................*...........................................................
        // ssub16 r11, r14, r11           // .........................................*..........................................................
        // sadd16 r6, r2, r4              // ...................................*................................................................
        // ssub16 r4, r2, r4              // ..................................*.................................................................
        // vmov r10, s1                   // ....................................*...............................................................
        // smulwb r14, r10, r5              // ..........................................*.........................................................
        // smulwt r5, r10, r5               // ...........................................*........................................................
        // smlabt r14, r14, r12, r0         // ............................................*.......................................................
        // smlabt r5, r5, r12, r0           // .............................................*......................................................
        // pkhtb r14, r5, r14, asr #16      // ...............................................*....................................................
        // usub16 r5, r3, r14               // .................................................*..................................................
        // uadd16 r3, r3, r14               // ..................................................*.................................................
        // smulwb r14, r10, r9              // ......................................*.............................................................
        // smulwt r9, r10, r9               // .......................................*............................................................
        // smlabt r14, r14, r12, r0         // ........................................*...........................................................
        // smlabt r9, r9, r12, r0           // .........................................*..........................................................
        // pkhtb r14, r9, r14, asr #16      // ...........................................*........................................................
        // usub16 r9, r7, r14               // ..............................................*.....................................................
        // uadd16 r7, r7, r14               // ............................................*.......................................................
        // sadd16 r2, r8, r6              // .........................................................*..........................................
        // ssub16 r6, r8, r6              // ......................................................*.............................................
        // vmov r10, s3                   // .............................................*......................................................
        // smulwb r14, r10, r7              // ..............................................*.....................................................
        // smulwt r7, r10, r7               // ...............................................*....................................................
        // smlabt r14, r14, r12, r0         // ................................................*...................................................
        // smlabt r7, r7, r12, r0           // .................................................*..................................................
        // pkhtb r14, r7, r14, asr #16      // ...................................................*................................................
        // usub16 r7, r3, r14               // .....................................................*..............................................
        // uadd16 r3, r3, r14               // ....................................................*...............................................
        // vmov r10, s4                   // ................................................*...................................................
        // smulwb r14, r10, r4              // ..................................................*.................................................
        // smulwt r4, r10, r4               // ...................................................*................................................
        // smlabt r14, r14, r12, r0         // ....................................................*...............................................
        // smlabt r4, r4, r12, r0           // ......................................................*.............................................
        // pkhtb r14, r4, r14, asr #16      // ........................................................*...........................................
        // ssub16 r8, r11, r14            // ............................................................*.......................................
        // sadd16 r4, r11, r14            // ...........................................................*........................................
        // vmov r10, s5                   // ...............................................................*....................................
        // smulwb r14, r10, r9              // ................................................................*...................................
        // smulwt r9, r10, r9               // .................................................................*..................................
        // smlabt r14, r14, r12, r0         // ..................................................................*.................................
        // smlabt r9, r9, r12, r0           // ...................................................................*................................
        // pkhtb r14, r9, r14, asr #16      // ......................................................................*.............................
        // usub16 r9, r5, r14               // ............................................................................*.......................
        // uadd16 r5, r5, r14               // ...........................................................................*........................
        // ldr r11, [r1, #4]                // .....................................................*..............................................
        // ldr r10, [r1], #8                // ..................................................................*.................................
        // smulwb r14, r10, r2              // ....................................................................*...............................
        // smulwt r2, r10, r2               // .....................................................................*..............................
        // smlabt r14, r14, r12, r0         // ......................................................................*.............................
        // smlabt r2, r2, r12, r0           // .......................................................................*............................
        // pkhtb r2, r2, r14, asr #16       // .........................................................................*..........................
        // smulwb r14, r11, r3              // .........................................................*..........................................
        // smulwt r3, r11, r3               // ........................................................*...........................................
        // smlabt r14, r14, r12, r0         // ...........................................................*........................................
        // smlabt r3, r3, r12, r0           // ..........................................................*.........................................
        // pkhtb r3, r3, r14, asr #16       // ..............................................................*.....................................
        // ldr r11, [r1, #4]                // ..........................................................................*.........................
        // ldr r10, [r1], #8                // .....................................................................*..............................
        // smulwb r14, r10, r4              // .........................................................................*..........................
        // smulwt r4, r10, r4               // ........................................................................*...........................
        // smlabt r14, r14, r12, r0         // ...........................................................................*........................
        // smlabt r4, r4, r12, r0           // ..........................................................................*.........................
        // pkhtb r4, r4, r14, asr #16       // ................................................................................*...................
        // smulwb r14, r11, r5              // ............................................................................*.......................
        // smulwt r5, r11, r5               // .............................................................................*......................
        // smlabt r14, r14, r12, r0         // ..............................................................................*.....................
        // smlabt r5, r5, r12, r0           // ...............................................................................*....................
        // pkhtb r5, r5, r14, asr #16       // ..................................................................................*.................
        // ldr r11, [r1, #4]                // ..........................................................*.........................................
        // ldr r10, [r1], #8                // ..............................................................................*.....................
        // smulwb r14, r10, r6              // ................................................................................*...................
        // smulwt r6, r10, r6               // .................................................................................*..................
        // smlabt r14, r14, r12, r0         // ..................................................................................*.................
        // smlabt r6, r6, r12, r0           // .....................................................................................*..............
        // pkhtb r6, r6, r14, asr #16       // .......................................................................................*............
        // smulwb r14, r11, r7              // ............................................................*.......................................
        // smulwt r7, r11, r7               // .............................................................*......................................
        // smlabt r14, r14, r12, r0         // ..............................................................*.....................................
        // smlabt r7, r7, r12, r0           // ...............................................................*....................................
        // pkhtb r7, r7, r14, asr #16       // .................................................................*..................................
        // ldr r11, [r1, #4]                // .................................................................................*..................
        // ldr r10, [r1], #8                // ......................................................................................*.............
        // smulwb r14, r10, r8              // ........................................................................................*...........
        // smulwt r8, r10, r8               // .........................................................................................*..........
        // smlabt r14, r14, r12, r0         // ..........................................................................................*.........
        // smlabt r8, r8, r12, r0           // ...........................................................................................*........
        // pkhtb r8, r8, r14, asr #16       // ...............................................................................................*....
        // smulwb r14, r11, r9              // ....................................................................................*...............
        // smulwt r9, r11, r9               // ...................................................................................*................
        // smlabt r14, r14, r12, r0         // .......................................................................................*............
        // smlabt r9, r9, r12, r0           // ......................................................................................*.............
        // pkhtb r9, r9, r14, asr #16       // ..............................................................................................*.....
        // vmov r0, s6                      // ...........................................................................................*........
        // str.w r6, [r0, #256]             // ................................................................................................*...
        // str.w r7, [r0, #320]             // ............................................................................................*.......
        // str.w r8, [r0, #384]             // ...............................................................................................*....
        // str.w r9, [r0, #448]             // ..................................................................................................*.
        // str.w r3, [r0, #64]              // .............................................................................................*......
        // str.w r4, [r0, #128]             // ...................................................................................................*
        // str.w r5, [r0, #192]             // .................................................................................................*..
        // str.w r2, [r0], #4               // ..............................................................................................*.....

        layer567_first_end:



 // ITER 1-15
 add.w tmp, poly, #strincr2*3*(5)
 vmov s14, tmp
2:
                                            // Instructions:    160
                                            // Expected cycles: 94
                                            // Expected IPC:    1.70
                                            //
                                            // ------------------------------------- cycle (expected) -------------------------------------->
                                            // 0                        25                       50                       75
                                            // |------------------------|------------------------|------------------------|------------------
        ldr.w r10, [r1], #4                 // *.............................................................................................
        ldr.w r14, [r0, #320]               // *.............................................................................................
        ldr.w r7, [r0, #256]                // .*............................................................................................
        vmov s6, r0                         // .*............................................................................................
        ldr.w r6, [r0, #192]                // ..*...........................................................................................
        ldr.w r2, [r0, #128]                // ...*..........................................................................................
        smulwt r11, r10, r6                 // ....*.........................................................................................
        ldr.w r4, [r0, #448]                // ....*.........................................................................................
        ldr.w r9, [r0, #384]                // .....*........................................................................................
        smulwb r5, r10, r6                  // .....*........................................................................................
        ldr.w r6, [r0, #0]                  // ......*.......................................................................................
        smulwb r8, r10, r4                  // ......*.......................................................................................
        ldr.w r3, [r0, #64]                 // .......*......................................................................................
        smulwt r4, r10, r4                  // .......*......................................................................................
        movw r0, #26632                     // ........*.....................................................................................
        smlabt r11, r11, r12, r0            // ........*.....................................................................................
        smlabt r5, r5, r12, r0              // .........*....................................................................................
        smlabt r8, r8, r12, r0              // ..........*...................................................................................
        smlabt r4, r4, r12, r0              // ...........*..................................................................................
        pkhtb r11, r11, r5, asr #16         // ............*.................................................................................
        smulwt r5, r10, r14                 // ............*.................................................................................
        pkhtb r4, r4, r8, asr #16           // .............*................................................................................
        smulwb r8, r10, r14                 // .............*................................................................................
        usub16 r14, r2, r11                 // ..............*...............................................................................
        smlabt r5, r5, r12, r0              // ..............*...............................................................................
        uadd16 r11, r2, r11                 // ...............*..............................................................................
        smlabt r2, r8, r12, r0              // ...............*..............................................................................
        smulwb r8, r10, r3                  // ................*.............................................................................
        smulwt r3, r10, r3                  // .................*............................................................................
        ldr r10, [r1], #8                   // .................*............................................................................
        pkhtb r2, r5, r2, asr #16           // ..................*...........................................................................
        smlabt r5, r8, r12, r0              // ..................*...........................................................................
        usub16 r8, r9, r4                   // ...................*..........................................................................
        smlabt r3, r3, r12, r0              // ...................*..........................................................................
        uadd16 r9, r9, r4                   // ....................*.........................................................................
        smulwb r4, r10, r11                 // ....................*.........................................................................
        pkhtb r5, r3, r5, asr #16           // .....................*........................................................................
        smulwt r11, r10, r11                // .....................*........................................................................
        uadd16 r3, r6, r5                   // ......................*.......................................................................
        smlabt r4, r4, r12, r0              // ......................*.......................................................................
        usub16 r6, r6, r5                   // .......................*......................................................................
        smlabt r11, r11, r12, r0            // .......................*......................................................................
        smulwb r5, r10, r9                  // ........................*.....................................................................
        pkhtb r4, r11, r4, asr #16          // .........................*....................................................................
        smulwt r11, r10, r9                 // .........................*....................................................................
        smlabt r5, r5, r12, r0              // ..........................*...................................................................
        ldr r10, [r1, #-4]                  // ..........................*...................................................................
        usub16 r9, r7, r2                   // ...........................*..................................................................
        smlabt r11, r11, r12, r0            // ...........................*..................................................................
        uadd16 r2, r7, r2                   // ............................*.................................................................
        smulwb r7, r10, r8                  // ............................*.................................................................
        pkhtb r11, r11, r5, asr #16         // .............................*................................................................
        smulwt r5, r10, r8                  // .............................*................................................................
        usub16 r8, r2, r11                  // ..............................*...............................................................
        smlabt r7, r7, r12, r0              // ..............................*...............................................................
        uadd16 r11, r2, r11                 // ...............................*..............................................................
        smlabt r2, r5, r12, r0              // ...............................*..............................................................
        smulwb r5, r10, r14                 // ................................*.............................................................
        pkhtb r7, r2, r7, asr #16           // .................................*............................................................
        smulwt r2, r10, r14                 // .................................*............................................................
        smlabt r10, r5, r12, r0             // ..................................*...........................................................
        ldr r5, [r1, #4]                    // ..................................*...........................................................
        uadd16 r14, r9, r7                  // ...................................*..........................................................
        smlabt r2, r2, r12, r0              // ...................................*..........................................................
        pkhtb r2, r2, r10, asr #16          // .....................................*........................................................
        smulwb r10, r5, r14                 // .....................................*........................................................
        usub16 r9, r9, r7                   // ......................................*.......................................................
        smulwt r5, r5, r14                  // ......................................*.......................................................
        smlabt r7, r10, r12, r0             // .......................................*......................................................
        ldr r10, [r1], #8                   // .......................................*......................................................
        usub16 r14, r3, r4                  // ........................................*.....................................................
        smlabt r5, r5, r12, r0              // ........................................*.....................................................
        uadd16 r4, r3, r4                   // .........................................*....................................................
        smulwb r3, r10, r11                 // .........................................*....................................................
        pkhtb r7, r5, r7, asr #16           // ..........................................*...................................................
        smulwt r10, r10, r11                // ..........................................*...................................................
        smlabt r11, r3, r12, r0             // ...........................................*..................................................
        ldr r5, [r1], #8                    // ...........................................*..................................................
        uadd16 r3, r6, r2                   // ............................................*.................................................
        smlabt r10, r10, r12, r0            // ............................................*.................................................
        usub16 r2, r6, r2                   // .............................................*................................................
        smulwb r6, r5, r8                   // .............................................*................................................
        pkhtb r10, r10, r11, asr #16        // ..............................................*...............................................
        smulwt r5, r5, r8                   // ..............................................*...............................................
        smlabt r11, r6, r12, r0             // ...............................................*..............................................
        ldr r6, [r1, #-4]                   // ...............................................*..............................................
        uadd16 r8, r3, r7                   // ................................................*.............................................
        smlabt r5, r5, r12, r0              // ................................................*.............................................
        usub16 r7, r3, r7                   // .................................................*............................................
        smulwb r3, r6, r9                   // .................................................*............................................
        pkhtb r11, r5, r11, asr #16         // ..................................................*...........................................
        smulwt r9, r6, r9                   // ..................................................*...........................................
        ldr r5, [r1, #4]                    // ...................................................*..........................................
        smlabt r3, r3, r12, r0              // ...................................................*..........................................
        usub16 r6, r4, r10                  // ....................................................*.........................................
        smlabt r9, r9, r12, r0              // ....................................................*.........................................
        uadd16 r4, r4, r10                  // .....................................................*........................................
        smulwb r10, r5, r8                  // .....................................................*........................................
        smulwt r8, r5, r8                   // ......................................................*.......................................
        ldr r5, [r1], #8                    // ......................................................*.......................................
        pkhtb r9, r9, r3, asr #16           // .......................................................*......................................
        smlabt r3, r10, r12, r0             // .......................................................*......................................
        usub16 r10, r2, r9                  // ........................................................*.....................................
        smlabt r8, r8, r12, r0              // ........................................................*.....................................
        uadd16 r9, r2, r9                   // .........................................................*....................................
        smulwt r2, r5, r4                   // .........................................................*....................................
        smulwb r5, r5, r4                   // ..........................................................*...................................
        ldr r4, [r1], #8                    // ..........................................................*...................................
        pkhtb r3, r8, r3, asr #16           // ...........................................................*..................................
        smlabt r2, r2, r12, r0              // ...........................................................*..................................
        uadd16 r8, r14, r11                 // ............................................................*.................................
        smlabt r5, r5, r12, r0              // ............................................................*.................................
        usub16 r14, r14, r11                // .............................................................*................................
        smulwb r11, r4, r8                  // .............................................................*................................
        smulwt r8, r4, r8                   // ..............................................................*...............................
        smlabt r4, r11, r12, r0             // ...............................................................*..............................
        ldr r11, [r1, #-4]                  // ...............................................................*..............................
        pkhtb r2, r2, r5, asr #16           // ................................................................*.............................
        smlabt r5, r8, r12, r0              // ................................................................*.............................
        smulwt r8, r11, r9                  // .................................................................*............................
        smulwb r9, r11, r9                  // ..................................................................*...........................
        smlabt r11, r8, r12, r0             // ...................................................................*..........................
        ldr r8, [r1], #8                    // ...................................................................*..........................
        pkhtb r4, r5, r4, asr #16           // ....................................................................*.........................
        smlabt r5, r9, r12, r0              // ....................................................................*.........................
        smulwt r9, r8, r6                   // .....................................................................*........................
        smulwb r6, r8, r6                   // ......................................................................*.......................
        ldr r8, [r1, #-4]                   // ......................................................................*.......................
        pkhtb r11, r11, r5, asr #16         // .......................................................................*......................
        smlabt r6, r6, r12, r0              // ........................................................................*.....................
        smlabt r9, r9, r12, r0              // .........................................................................*....................
        smulwb r5, r8, r7                   // ..........................................................................*...................
        pkhtb r9, r9, r6, asr #16           // ...........................................................................*..................
        smulwt r7, r8, r7                   // ...........................................................................*..................
        smlabt r6, r5, r12, r0              // ............................................................................*.................
        ldr r8, [r1], #8                    // ............................................................................*.................
        smlabt r7, r7, r12, r0              // .............................................................................*................
        smulwt r5, r8, r14                  // ..............................................................................*...............
        pkhtb r7, r7, r6, asr #16           // ...............................................................................*..............
        smulwb r14, r8, r14                 // ...............................................................................*..............
        ldr r8, [r1, #-4]                   // ................................................................................*.............
        smlabt r6, r5, r12, r0              // ................................................................................*.............
        smlabt r14, r14, r12, r0            // .................................................................................*............
        smulwt r5, r8, r10                  // ..................................................................................*...........
        smulwb r10, r8, r10                 // ...................................................................................*..........
        pkhtb r14, r6, r14, asr #16         // ....................................................................................*.........
        smlabt r6, r5, r12, r0              // ....................................................................................*.........
        smlabt r5, r10, r12, r0             // .....................................................................................*........
        vmov r0, s6                         // .....................................................................................*........
        str.w r7, [r0, #320]                // ......................................................................................*.......
        str.w r11, [r0, #192]               // .......................................................................................*......
        pkhtb r8, r6, r5, asr #16           // ........................................................................................*.....
        str.w r4, [r0, #128]                // ........................................................................................*.....
        str.w r14, [r0, #384]               // .........................................................................................*....
        vmov r14, s14                       // .........................................................................................*....
        str.w r2, [r0], #4                  // ..........................................................................................*...
        str.w r3, [r0, #60]                 // ...........................................................................................*..
        cmp.w r0, r14                       // ...........................................................................................*..
        str.w r8, [r0, #444]                // ............................................................................................*.
        str.w r9, [r0, #252]                // .............................................................................................*

                                            // ------------------------------------- cycle (expected) -------------------------------------->
                                            // 0                        25                       50                       75
                                            // |------------------------|------------------------|------------------------|------------------
        // vmov s6, r0                      // .*............................................................................................
        // ldr.w r2, [r0, #0]               // ......*.......................................................................................
        // ldr.w r3, [r0, #64]              // .......*......................................................................................
        // ldr.w r4, [r0, #128]             // ...*..........................................................................................
        // ldr.w r5, [r0, #192]             // ..*...........................................................................................
        // ldr.w r6, [r0, #256]             // .*............................................................................................
        // ldr.w r7, [r0, #320]             // *.............................................................................................
        // ldr.w r8, [r0, #384]             // .....*........................................................................................
        // ldr.w r9, [r0, #448]             // ....*.........................................................................................
        // movw r0, #26632                  // ........*.....................................................................................
        // ldr.w r10, [r1], #4              // *.............................................................................................
        // smulwb r14, r10, r3              // ................*.............................................................................
        // smulwt r3, r10, r3               // .................*............................................................................
        // smlabt r14, r14, r12, r0         // ..................*...........................................................................
        // smlabt r3, r3, r12, r0           // ...................*..........................................................................
        // pkhtb r14, r3, r14, asr #16      // .....................*........................................................................
        // usub16 r3, r2, r14               // .......................*......................................................................
        // uadd16 r2, r2, r14               // ......................*.......................................................................
        // smulwb r14, r10, r5              // .....*........................................................................................
        // smulwt r5, r10, r5               // ....*.........................................................................................
        // smlabt r14, r14, r12, r0         // .........*....................................................................................
        // smlabt r5, r5, r12, r0           // ........*.....................................................................................
        // pkhtb r14, r5, r14, asr #16      // ............*.................................................................................
        // usub16 r5, r4, r14               // ..............*...............................................................................
        // uadd16 r4, r4, r14               // ...............*..............................................................................
        // smulwb r14, r10, r7              // .............*................................................................................
        // smulwt r7, r10, r7               // ............*.................................................................................
        // smlabt r14, r14, r12, r0         // ...............*..............................................................................
        // smlabt r7, r7, r12, r0           // ..............*...............................................................................
        // pkhtb r14, r7, r14, asr #16      // ..................*...........................................................................
        // usub16 r7, r6, r14               // ...........................*..................................................................
        // uadd16 r6, r6, r14               // ............................*.................................................................
        // smulwb r14, r10, r9              // ......*.......................................................................................
        // smulwt r9, r10, r9               // .......*......................................................................................
        // smlabt r14, r14, r12, r0         // ..........*...................................................................................
        // smlabt r9, r9, r12, r0           // ...........*..................................................................................
        // pkhtb r14, r9, r14, asr #16      // .............*................................................................................
        // usub16 r9, r8, r14               // ...................*..........................................................................
        // uadd16 r8, r8, r14               // ....................*.........................................................................
        // ldr r11, [r1, #4]                // ..........................*...................................................................
        // ldr r10, [r1], #8                // .................*............................................................................
        // smulwb r14, r10, r4              // ....................*.........................................................................
        // smulwt r4, r10, r4               // .....................*........................................................................
        // smlabt r14, r14, r12, r0         // ......................*.......................................................................
        // smlabt r4, r4, r12, r0           // .......................*......................................................................
        // pkhtb r14, r4, r14, asr #16      // .........................*....................................................................
        // usub16 r4, r2, r14               // ........................................*.....................................................
        // uadd16 r2, r2, r14               // .........................................*....................................................
        // smulwb r14, r11, r5              // ................................*.............................................................
        // smulwt r5, r11, r5               // .................................*............................................................
        // smlabt r14, r14, r12, r0         // ..................................*...........................................................
        // smlabt r5, r5, r12, r0           // ...................................*..........................................................
        // pkhtb r14, r5, r14, asr #16      // .....................................*........................................................
        // usub16 r5, r3, r14               // .............................................*................................................
        // uadd16 r3, r3, r14               // ............................................*.................................................
        // smulwb r14, r10, r8              // ........................*.....................................................................
        // smulwt r8, r10, r8               // .........................*....................................................................
        // smlabt r14, r14, r12, r0         // ..........................*...................................................................
        // smlabt r8, r8, r12, r0           // ...........................*..................................................................
        // pkhtb r14, r8, r14, asr #16      // .............................*................................................................
        // usub16 r8, r6, r14               // ..............................*...............................................................
        // uadd16 r6, r6, r14               // ...............................*..............................................................
        // smulwb r14, r11, r9              // ............................*.................................................................
        // smulwt r9, r11, r9               // .............................*................................................................
        // smlabt r14, r14, r12, r0         // ..............................*...............................................................
        // smlabt r9, r9, r12, r0           // ...............................*..............................................................
        // pkhtb r14, r9, r14, asr #16      // .................................*............................................................
        // usub16 r9, r7, r14               // ......................................*.......................................................
        // uadd16 r7, r7, r14               // ...................................*..........................................................
        // ldr r11, [r1, #4]                // ..................................*...........................................................
        // ldr r10, [r1], #8                // .......................................*......................................................
        // smulwb r14, r10, r6              // .........................................*....................................................
        // smulwt r6, r10, r6               // ..........................................*...................................................
        // smlabt r14, r14, r12, r0         // ...........................................*..................................................
        // smlabt r6, r6, r12, r0           // ............................................*.................................................
        // pkhtb r14, r6, r14, asr #16      // ..............................................*...............................................
        // usub16 r6, r2, r14               // ....................................................*.........................................
        // uadd16 r2, r2, r14               // .....................................................*........................................
        // smulwb r14, r11, r7              // .....................................*........................................................
        // smulwt r7, r11, r7               // ......................................*.......................................................
        // smlabt r14, r14, r12, r0         // .......................................*......................................................
        // smlabt r7, r7, r12, r0           // ........................................*.....................................................
        // pkhtb r14, r7, r14, asr #16      // ..........................................*...................................................
        // usub16 r7, r3, r14               // .................................................*............................................
        // uadd16 r3, r3, r14               // ................................................*.............................................
        // ldr r11, [r1, #4]                // ...............................................*..............................................
        // ldr r10, [r1], #8                // ...........................................*..................................................
        // smulwb r14, r10, r8              // .............................................*................................................
        // smulwt r8, r10, r8               // ..............................................*...............................................
        // smlabt r14, r14, r12, r0         // ...............................................*..............................................
        // smlabt r8, r8, r12, r0           // ................................................*.............................................
        // pkhtb r14, r8, r14, asr #16      // ..................................................*...........................................
        // usub16 r8, r4, r14               // .............................................................*................................
        // uadd16 r4, r4, r14               // ............................................................*.................................
        // smulwb r14, r11, r9              // .................................................*............................................
        // smulwt r9, r11, r9               // ..................................................*...........................................
        // smlabt r14, r14, r12, r0         // ...................................................*..........................................
        // smlabt r9, r9, r12, r0           // ....................................................*.........................................
        // pkhtb r14, r9, r14, asr #16      // .......................................................*......................................
        // usub16 r9, r5, r14               // ........................................................*.....................................
        // uadd16 r5, r5, r14               // .........................................................*....................................
        // ldr r11, [r1, #4]                // ...................................................*..........................................
        // ldr r10, [r1], #8                // ......................................................*.......................................
        // smulwb r14, r10, r2              // ..........................................................*...................................
        // smulwt r2, r10, r2               // .........................................................*....................................
        // smlabt r14, r14, r12, r0         // ............................................................*.................................
        // smlabt r2, r2, r12, r0           // ...........................................................*..................................
        // pkhtb r2, r2, r14, asr #16       // ................................................................*.............................
        // smulwb r14, r11, r3              // .....................................................*........................................
        // smulwt r3, r11, r3               // ......................................................*.......................................
        // smlabt r14, r14, r12, r0         // .......................................................*......................................
        // smlabt r3, r3, r12, r0           // ........................................................*.....................................
        // pkhtb r3, r3, r14, asr #16       // ...........................................................*..................................
        // ldr r11, [r1, #4]                // ...............................................................*..............................
        // ldr r10, [r1], #8                // ..........................................................*...................................
        // smulwb r14, r10, r4              // .............................................................*................................
        // smulwt r4, r10, r4               // ..............................................................*...............................
        // smlabt r14, r14, r12, r0         // ...............................................................*..............................
        // smlabt r4, r4, r12, r0           // ................................................................*.............................
        // pkhtb r4, r4, r14, asr #16       // ....................................................................*.........................
        // smulwb r14, r11, r5              // ..................................................................*...........................
        // smulwt r5, r11, r5               // .................................................................*............................
        // smlabt r14, r14, r12, r0         // ....................................................................*.........................
        // smlabt r5, r5, r12, r0           // ...................................................................*..........................
        // pkhtb r5, r5, r14, asr #16       // .......................................................................*......................
        // ldr r11, [r1, #4]                // ......................................................................*.......................
        // ldr r10, [r1], #8                // ...................................................................*..........................
        // smulwb r14, r10, r6              // ......................................................................*.......................
        // smulwt r6, r10, r6               // .....................................................................*........................
        // smlabt r14, r14, r12, r0         // ........................................................................*.....................
        // smlabt r6, r6, r12, r0           // .........................................................................*....................
        // pkhtb r6, r6, r14, asr #16       // ...........................................................................*..................
        // smulwb r14, r11, r7              // ..........................................................................*...................
        // smulwt r7, r11, r7               // ...........................................................................*..................
        // smlabt r14, r14, r12, r0         // ............................................................................*.................
        // smlabt r7, r7, r12, r0           // .............................................................................*................
        // pkhtb r7, r7, r14, asr #16       // ...............................................................................*..............
        // ldr r11, [r1, #4]                // ................................................................................*.............
        // ldr r10, [r1], #8                // ............................................................................*.................
        // smulwb r14, r10, r8              // ...............................................................................*..............
        // smulwt r8, r10, r8               // ..............................................................................*...............
        // smlabt r14, r14, r12, r0         // .................................................................................*............
        // smlabt r8, r8, r12, r0           // ................................................................................*.............
        // pkhtb r8, r8, r14, asr #16       // ....................................................................................*.........
        // smulwb r14, r11, r9              // ...................................................................................*..........
        // smulwt r9, r11, r9               // ..................................................................................*...........
        // smlabt r14, r14, r12, r0         // .....................................................................................*........
        // smlabt r9, r9, r12, r0           // ....................................................................................*.........
        // pkhtb r9, r9, r14, asr #16       // ........................................................................................*.....
        // vmov r0, s6                      // .....................................................................................*........
        // str.w r6, [r0, #256]             // .............................................................................................*
        // str.w r7, [r0, #320]             // ......................................................................................*.......
        // str.w r8, [r0, #384]             // .........................................................................................*....
        // str.w r9, [r0, #448]             // ............................................................................................*.
        // str.w r3, [r0, #64]              // ...........................................................................................*..
        // str.w r4, [r0, #128]             // ........................................................................................*.....
        // str.w r5, [r0, #192]             // .......................................................................................*......
        // str.w r2, [r0], #4               // ..........................................................................................*...
        // vmov r14, s14                    // .........................................................................................*....
        // cmp.w r0, r14                    // ...........................................................................................*..

        bne 2b

 vpop.w {s16-s23}
 pop {r4-r11, pc}

.size invntt_fast_opt_m7, .-invntt_fast_opt_m7