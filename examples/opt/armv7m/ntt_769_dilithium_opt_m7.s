/**
 * Copyright (c) 2023 Junhao Huang (jhhuang_nuaa@126.com)
 *
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http:// www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
.syntax unified
.cpu cortex-m4
.thumb

// general macros
.macro load a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  ldr.w \a0, [\a, \mem0]
  ldr.w \a1, [\a, \mem1]
  ldr.w \a2, [\a, \mem2]
  ldr.w \a3, [\a, \mem3]
.endm

.macro store a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  str.w \a0, [\a, \mem0]
  str.w \a1, [\a, \mem1]
  str.w \a2, [\a, \mem2]
  str.w \a3, [\a, \mem3]
.endm

.macro mul_twiddle_plant a, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a
 smulwt \a,   \twiddle, \a
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a, \a, \q, \qa
 pkhtb \a, \a, \tmp, asr #16
.endm

.macro doublebutterfly_plant a0, a1, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a1
 smulwt \a1, \twiddle, \a1
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a1, \a1, \q, \qa
 pkhtb \tmp, \a1, \tmp, asr #16
 usub16 \a1, \a0, \tmp
 uadd16 \a0, \a0, \tmp
.endm

.macro two_doublebutterfly_plant a0, a1, a2, a3, twiddle0, twiddle1, tmp, q, qa
 doublebutterfly_plant \a0, \a1, \twiddle0, \tmp, \q, \qa
 doublebutterfly_plant \a2, \a3, \twiddle1, \tmp, \q, \qa
.endm

// #######
// #######
// # NTT #
// #######
// #######

.macro _3_layer_double_CT_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 // layer 3
 ldr.w \twiddle1, [\twiddle_ptr], #4
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle2, \twiddle2, \tmp, \q, \qa

 // layer 1
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.macro _3_layer_double_CT_16_plant_fp c0, c1, c2, c3, c4, c5, c6, c7, xi0, xi1, xi2, xi3, xi4, xi5, xi6, twiddle1, twiddle2, q, qa, tmp
 // layer 3
 vmov \twiddle1, \xi0
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 vmov \twiddle1, \xi1
 vmov \twiddle2, \xi2
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle2, \twiddle2, \tmp, \q, \qa

 // layer 1
 vmov \twiddle1, \xi3
 vmov \twiddle2, \xi4
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 vmov \twiddle1, \xi5
 vmov \twiddle2, \xi6
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.global small_ntt_asm_769_opt_m7
.type small_ntt_asm_769_opt_m7, %function
.align 2
small_ntt_asm_769_opt_m7:
 push {r4-r11, r14}
 vpush.w {s16-s27}
 poly         .req r0
 twiddle_ptr  .req r1
 poly0        .req r2
 poly1        .req r3
 poly2        .req r4
 poly3        .req r5
 poly4        .req r6
 poly5        .req r7
 poly6        .req r8
 poly7        .req r9
 twiddle1     .req r10
 twiddle2     .req r11
 ###  qinv        .req r11 ### q^-1 mod 2^2n; n=16
 q           .req r12
 ### at the top of r12
 qa          .req r0
 ### qa=2^a q;a=3; at the bottom of r12
 tmp         .req r14

 // movw qa, #24608
 // Why movt? Because we initially placed qa at the bottom of the same register as q;
 movt q, #769

 ### LAYER 7+6+5+4
 .equ distance, 256
 .equ offset, 32
 .equ strincr, 4
 // pre-load 15 twiddle factors to 15 FPU registers
 // s0-s7 used to temporary store 16 16-bit polys.
 vldm twiddle_ptr!, {s8-s22}

 add tmp, poly, #strincr*8
 // s23: poly addr
 // s24: tmp
        // s25: twiddle_ptr
 vmov s24, tmp
        vmov s25, twiddle_ptr
layer1234_loop:
                                            // Instructions:    299
                                            // Expected cycles: 177
                                            // Expected IPC:    1.69
                                            //
                                            // ------------------------------------------------------------------------------------------------------------------------------------------- original position -------------------------------------------------------------------------------------------------------------------------------------------->
                                            // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225                      250                      275
                                            // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----------------------
        vmov r11, s8                        // *..........................................................................................................................................................................................................................................................................................................
        ldr.w r2, [r0, #480]                // .............*.............................................................................................................................................................................................................................................................................................
        ldr.w r10, [r0, #416]               // .*.........................................................................................................................................................................................................................................................................................................
        vmov s23, r0                        // ..*........................................................................................................................................................................................................................................................................................................
        smulwb r4, r11, r2                  // ..........................*................................................................................................................................................................................................................................................................................
        ldr.w r8, [r0, #288]                // .....*.....................................................................................................................................................................................................................................................................................................
        ldr.w r1, [r0, #96]                 // .........*.................................................................................................................................................................................................................................................................................................
        smulwt r5, r11, r2                  // ............................*..............................................................................................................................................................................................................................................................................
        smulwb r9, r11, r8                  // ........*..................................................................................................................................................................................................................................................................................................
        ldr.w r6, [r0, #352]                // ...*.......................................................................................................................................................................................................................................................................................................
        ldr.w r14, [r0, #160]               // ..........*................................................................................................................................................................................................................................................................................................
        smulwt r3, r11, r8                  // ............*..............................................................................................................................................................................................................................................................................................
        ldr.w r2, [r0, #32]                 // .......*...................................................................................................................................................................................................................................................................................................
        smulwt r7, r11, r6                  // ....................*......................................................................................................................................................................................................................................................................................
        ldr.w r8, [r0, #224]                // ..............*............................................................................................................................................................................................................................................................................................
        movw r0, #24608                     // ...............*...........................................................................................................................................................................................................................................................................................
        smlabt r5, r5, r12, r0              // ................................*..........................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r4, r4, r12, r0              // ..............................*............................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ..................*........................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        pkhtb r5, r5, r4, asr #16           // ....................................*......................................................................................................................................................................................................................................................................
        smulwb r4, r11, r6                  // ......*....................................................................................................................................................................................................................................................................................................
        smlabt r6, r9, r12, r0              // ................*..........................................................................................................................................................................................................................................................................................
        usub16 r9, r8, r5                   // .....................................*.....................................................................................................................................................................................................................................................................
        uadd16 r5, r8, r5                   // ......................................*....................................................................................................................................................................................................................................................................
        smulwb r8, r11, r10                 // ...........*...............................................................................................................................................................................................................................................................................................
        smulwt r11, r11, r10                // ....*......................................................................................................................................................................................................................................................................................................
        pkhtb r10, r3, r6, asr #16          // .....................*.....................................................................................................................................................................................................................................................................................
        usub16 r6, r2, r10                  // .......................*...................................................................................................................................................................................................................................................................................
        smlabt r8, r8, r12, r0              // ...................*.......................................................................................................................................................................................................................................................................................
        uadd16 r2, r2, r10                  // ........................*..................................................................................................................................................................................................................................................................................
        smlabt r11, r11, r12, r0            // ......................*....................................................................................................................................................................................................................................................................................
        vmov r10, s9                        // .......................................*...................................................................................................................................................................................................................................................................
        smlabt r7, r7, r12, r0              // .........................*.................................................................................................................................................................................................................................................................................
        smlabt r3, r4, r12, r0              // .................*.........................................................................................................................................................................................................................................................................................
        pkhtb r4, r11, r8, asr #16          // ...........................*...............................................................................................................................................................................................................................................................................
        vmov r11, s10                       // ........................................*..................................................................................................................................................................................................................................................................
        usub16 r8, r14, r4                  // ...................................*.......................................................................................................................................................................................................................................................................
        uadd16 r4, r14, r4                  // ..................................*........................................................................................................................................................................................................................................................................
        pkhtb r7, r7, r3, asr #16           // .............................*.............................................................................................................................................................................................................................................................................
        smulwb r14, r10, r4                 // .........................................*.................................................................................................................................................................................................................................................................
        uadd16 r3, r1, r7                   // ...............................*...........................................................................................................................................................................................................................................................................
        smulwt r4, r10, r4                  // ..........................................*................................................................................................................................................................................................................................................................
        usub16 r7, r1, r7                   // .................................*.........................................................................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // ...........................................*...............................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r4, r4, r12, r0              // ............................................*..............................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwt r1, r10, r5                  // ..............................................*............................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r10, r10, r5                 // .............................................*.............................................................................................................................................................................................................................................................
        pkhtb r14, r4, r14, asr #16         // ................................................*..........................................................................................................................................................................................................................................................
        usub16 r4, r2, r14                  // ..................................................*........................................................................................................................................................................................................................................................
        smlabt r5, r1, r12, r0              // ...................................................*.......................................................................................................................................................................................................................................................
        uadd16 r1, r2, r14                  // ....................................................*......................................................................................................................................................................................................................................................
        smlabt r2, r10, r12, r0             // ...............................................*...........................................................................................................................................................................................................................................................
        smulwb r14, r11, r8                 // .............................................................*.............................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        pkhtb r5, r5, r2, asr #16           // ......................................................*....................................................................................................................................................................................................................................................
        smulwt r10, r11, r8                 // .................................................*.........................................................................................................................................................................................................................................................
        smlabt r8, r14, r12, r0             // ....................................................................*......................................................................................................................................................................................................................................
        uadd16 r2, r3, r5                   // ........................................................*..................................................................................................................................................................................................................................................
        smlabt r10, r10, r12, r0            // .....................................................*.....................................................................................................................................................................................................................................................
        usub16 r14, r3, r5                  // ..........................................................*................................................................................................................................................................................................................................................
        vmov r5, s12                        // ........................................................................*..................................................................................................................................................................................................................................
        smulwb r3, r11, r9                  // .......................................................*...................................................................................................................................................................................................................................................
        pkhtb r10, r10, r8, asr #16         // .......................................................................*...................................................................................................................................................................................................................................
        smulwb r8, r5, r14                  // ..........................................................................*................................................................................................................................................................................................................................
        smulwt r14, r5, r14                 // .............................................................................*.............................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r5, r8, r12, r0              // ..............................................................................*............................................................................................................................................................................................................................
        usub16 r8, r6, r10                  // .........................................................................*.................................................................................................................................................................................................................................
        uadd16 r6, r6, r10                  // ...............................................................................*...........................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // .................................................................................*.........................................................................................................................................................................................................................
        smulwt r9, r11, r9                  // .........................................................*.................................................................................................................................................................................................................................................
        vmov r10, s11                       // ..............................................................*............................................................................................................................................................................................................................................
        pkhtb r14, r14, r5, asr #16         // ..................................................................................*........................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ...........................................................*...............................................................................................................................................................................................................................................
        usub16 r5, r4, r14                  // ...................................................................................*.......................................................................................................................................................................................................................
        smulwb r11, r10, r2                 // ..................................................................*........................................................................................................................................................................................................................................
        smlabt r9, r9, r12, r0              // ............................................................*..............................................................................................................................................................................................................................................
        uadd16 r4, r4, r14                  // ....................................................................................*......................................................................................................................................................................................................................
        smulwt r14, r10, r2                 // ................................................................*..........................................................................................................................................................................................................................................
        vmov r10, s13                       // .....................................................................................*.....................................................................................................................................................................................................................
        smlabt r2, r11, r12, r0             // ......................................................................*....................................................................................................................................................................................................................................
        vmov r11, s14                       // ......................................................................................*....................................................................................................................................................................................................................
        pkhtb r3, r9, r3, asr #16           // ...............................................................*...........................................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // .....................................................................*.....................................................................................................................................................................................................................................
        usub16 r9, r7, r3                   // .................................................................*.........................................................................................................................................................................................................................................
        uadd16 r7, r7, r3                   // ...................................................................*.......................................................................................................................................................................................................................................
        smulwt r3, r11, r9                  // ...................................................................................................*.......................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r11, r11, r9                 // ................................................................................................*..........................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r9, r3, r12, r0              // ......................................................................................................*....................................................................................................................................................................................................
        pkhtb r3, r14, r2, asr #16          // ...........................................................................*...............................................................................................................................................................................................................................
        smulwb r14, r10, r7                 // .......................................................................................*...................................................................................................................................................................................................................
        uadd16 r2, r1, r3                   // ................................................................................*..........................................................................................................................................................................................................................
        smlabt r11, r11, r12, r0            // ....................................................................................................*......................................................................................................................................................................................................
        usub16 r3, r1, r3                   // ............................................................................*..............................................................................................................................................................................................................................
        smulwt r7, r10, r7                  // ........................................................................................*..................................................................................................................................................................................................................
        vmov r10, s17                       // .....................................................................................................*.....................................................................................................................................................................................................
        smulwt r1, r10, r4                  // .......................................................................................................*...................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r4, r10, r4                  // .........................................................................................................*.................................................................................................................................................................................................
        pkhtb r10, r9, r11, asr #16         // ........................................................................................................*..................................................................................................................................................................................................
        vmov r11, s15                       // ...................................................................................................................*.......................................................................................................................................................................................
        smlabt r9, r7, r12, r0              // ...........................................................................................*...............................................................................................................................................................................................................
        smulwt r7, r11, r2                  // .....................................................................................................................*.....................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r2, r11, r2                  // ........................................................................................................................*..................................................................................................................................................................................
        smlabt r11, r7, r12, r0             // ...........................................................................................................................*...............................................................................................................................................................................
        vmov r7, s18                        // ..........................................................................................*................................................................................................................................................................................................................
        smlabt r2, r2, r12, r0              // .............................................................................................................................*.............................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r4, r4, r12, r0              // .............................................................................................................*.............................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r1, r1, r12, r0              // ...........................................................................................................*...............................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // .........................................................................................*.................................................................................................................................................................................................................
        pkhtb r2, r11, r2, asr #16          // ..............................................................................................................................*............................................................................................................................................................................
        pkhtb r4, r1, r4, asr #16           // ................................................................................................................*..........................................................................................................................................................................................
        smulwb r11, r7, r5                  // ..............................................................................................*............................................................................................................................................................................................................
        smulwt r1, r7, r5                   // ............................................................................................*..............................................................................................................................................................................................................
        vmov r5, s16                        // ............................................................................................................*..............................................................................................................................................................................................
        smulwt r7, r5, r3                   // ...............................................................................................................*...........................................................................................................................................................................................
        pkhtb r14, r9, r14, asr #16         // .............................................................................................*.............................................................................................................................................................................................................
        usub16 r9, r8, r10                  // ..........................................................................................................*................................................................................................................................................................................................
        smulwb r3, r5, r3                   // .................................................................................................................*.........................................................................................................................................................................................
        smlabt r1, r1, r12, r0              // ...............................................................................................*...........................................................................................................................................................................................................
        uadd16 r8, r8, r10                  // ..............................................................................................................*............................................................................................................................................................................................
        smlabt r10, r7, r12, r0             // ..................................................................................................................*........................................................................................................................................................................................
        usub16 r7, r6, r14                  // .................................................................................................*.........................................................................................................................................................................................................
        smlabt r11, r11, r12, r0            // .......................................................................................................................*...................................................................................................................................................................................
        uadd16 r6, r6, r14                  // ..................................................................................................*........................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ....................................................................................................................*......................................................................................................................................................................................
        vmov r5, s19                        // .........................................................................................................................*.................................................................................................................................................................................
        smulwb r14, r5, r6                  // ...............................................................................................................................*...........................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwt r6, r5, r6                   // ................................................................................................................................*..........................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // .................................................................................................................................*.........................................................................................................................................................................
        smlabt r6, r6, r12, r0              // ..................................................................................................................................*........................................................................................................................................................................
        pkhtb r5, r1, r11, asr #16          // ..........................................................................................................................*................................................................................................................................................................................
        pkhtb r3, r10, r3, asr #16          // ......................................................................................................................*....................................................................................................................................................................................
        vmov r11, s22                       // ..................................................................................................................................................*........................................................................................................................................................
        vmov r1, s23                        // .......................................................................................................................................................*...................................................................................................................................................
        smulwt r10, r11, r9                 // .....................................................................................................................................................*.....................................................................................................................................................
        smulwb r11, r11, r9                 // ......................................................................................................................................................*....................................................................................................................................................
        ldr.w r9, [r1, #448]                // ................................................................................................................................................................*..........................................................................................................................................
        vmov s2, r4                         // ...............................................................................................................................................*...........................................................................................................................................................
        smlabt r10, r10, r12, r0            // ........................................................................................................................................................*..................................................................................................................................................
        smlabt r4, r11, r12, r0             // ..........................................................................................................................................................*................................................................................................................................................
        vmov r11, s20                       // ............................................................................................................................*..............................................................................................................................................................................
        pkhtb r6, r6, r14, asr #16          // ...................................................................................................................................*.......................................................................................................................................................................
        smulwb r14, r11, r7                 // ....................................................................................................................................*......................................................................................................................................................................
        pkhtb r4, r10, r4, asr #16          // ...............................................................................................................................................................*...........................................................................................................................................
        smulwt r7, r11, r7                  // .....................................................................................................................................*.....................................................................................................................................................................
        vmov s4, r6                         // ............................................................................................................................................*..............................................................................................................................................................
        smlabt r14, r14, r12, r0            // ......................................................................................................................................*....................................................................................................................................................................
        smlabt r7, r7, r12, r0              // .......................................................................................................................................*...................................................................................................................................................................
        vmov r10, s21                       // .........................................................................................................................................*.................................................................................................................................................................
        smulwb r11, r10, r8                 // ..........................................................................................................................................*................................................................................................................................................................
        vmov s7, r4                         // ..................................................................................................................................................................*........................................................................................................................................
        smulwt r6, r10, r8                  // .............................................................................................................................................*.............................................................................................................................................................
        pkhtb r14, r7, r14, asr #16         // ...................................................................................................................................................*.......................................................................................................................................................
        smlabt r8, r11, r12, r0             // ..............................................................................................................................................*............................................................................................................................................................
        ldr.w r7, [r1, #256]                // .........................................................................................................................................................*.................................................................................................................................................
        smlabt r6, r6, r12, r0              // ................................................................................................................................................*..........................................................................................................................................................
        vmov r10, s8                        // ........................................................................................................................................*..................................................................................................................................................................
        vmov s5, r14                        // .........................................................................................................................................................................*.................................................................................................................................
        smulwt r14, r10, r7                 // ............................................................................................................................................................*..............................................................................................................................................
        smulwb r11, r10, r7                 // ..............................................................................................................................................................*............................................................................................................................................
        movw r0, #24608                     // ...........................................................................................................................................................*...............................................................................................................................................
        smlabt r14, r14, r12, r0            // .................................................................................................................................................................*.........................................................................................................................................
        pkhtb r4, r6, r8, asr #16           // ....................................................................................................................................................*......................................................................................................................................................
        smlabt r7, r11, r12, r0             // ...........................................................................................................................................................................*...............................................................................................................................
        vmov s0, r2                         // .................................................................................................................................................*.........................................................................................................................................................
        ldr.w r8, [r1, #384]                // ...................................................................................................................................................................*.......................................................................................................................................
        vmov s1, r3                         // .......................................................................................................................................................................*...................................................................................................................................
        pkhtb r14, r14, r7, asr #16         // ............................................................................................................................................................................*..............................................................................................................................
        ldr.w r7, [r1, #320]                // .............................................................................................................................................................*.............................................................................................................................................
        vmov s3, r5                         // ...........................................................................................................................................*...............................................................................................................................................................
        ldr.w r2, [r1, #0]                  // ..........................................................................................................................................................................*................................................................................................................................
        usub16 r6, r2, r14                  // .............................................................................................................................................................................*.............................................................................................................................
        uadd16 r2, r2, r14                  // ..............................................................................................................................................................................*............................................................................................................................
        ldr.w r5, [r1, #192]                // ......................................................................................................................................................................*....................................................................................................................................
        smulwb r14, r10, r7                 // ...............................................................................................................................................................................*...........................................................................................................................
        smulwt r11, r10, r8                 // ......................................................................................................................................................................................*....................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r3, r10, r8                  // ....................................................................................................................................................................................*......................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r11, r11, r12, r0            // ........................................................................................................................................................................................*..................................................................................................................
        smlabt r8, r3, r12, r0              // .......................................................................................................................................................................................*...................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwt r7, r10, r7                  // ................................................................................................................................................................................*..........................................................................................................................
        ldr.w r3, [r1, #64]                 // ........................................................................................................................................................................*..................................................................................................................................
        pkhtb r8, r11, r8, asr #16          // .............................................................................................................................................................................................*.............................................................................................................
        smulwb r11, r10, r9                 // ............................................................................................................................................................................................*..............................................................................................................
        smulwt r9, r10, r9                  // ...........................................................................................................................................................................................*...............................................................................................................
        vmov r10, s10                       // .........................................................................................................................................................................................................*.................................................................................................
        smlabt r14, r14, r12, r0            // .................................................................................................................................................................................*.........................................................................................................................
        vmov s6, r4                         // ....................................................................................................................................................................*......................................................................................................................................
        ldr.w r4, [r1, #128]                // .....................................................................................................................................................................*.....................................................................................................................................
        smlabt r11, r11, r12, r0            // ................................................................................................................................................................................................*..........................................................................................................
        usub16 r1, r4, r8                   // ...............................................................................................................................................................................................*...........................................................................................................
        smlabt r7, r7, r12, r0              // ..................................................................................................................................................................................*........................................................................................................................
        uadd16 r4, r4, r8                   // .................................................................................................................................................................................................*.........................................................................................................
        smulwb r8, r10, r1                  // ............................................................................................................................................................................................................*..............................................................................................
        pkhtb r7, r7, r14, asr #16          // .....................................................................................................................................................................................*.....................................................................................................................
        smulwt r14, r10, r1                 // ................................................................................................................................................................................................................*..........................................................................................
        uadd16 r1, r3, r7                   // .........................................................................................................................................................................................*.................................................................................................................
        smlabt r8, r8, r12, r0              // ..................................................................................................................................................................................................................*........................................................................................
        usub16 r7, r3, r7                   // ..........................................................................................................................................................................................*................................................................................................................
        smlabt r3, r14, r12, r0             // ...................................................................................................................................................................................................................*.......................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smlabt r14, r9, r12, r0             // ..............................................................................................................................................................................................*............................................................................................................
        pkhtb r9, r3, r8, asr #16           // .......................................................................................................................................................................................................................*...................................................................................
        usub16 r8, r6, r9                   // .........................................................................................................................................................................................................................*.................................................................................
        vmov r3, s9                         // ...................................................................................................................................................................................*.......................................................................................................................
        uadd16 r6, r6, r9                   // ..........................................................................................................................................................................................................................*................................................................................
        smulwt r9, r3, r4                   // ...................................................................................................................................................................................................*.......................................................................................................
        smulwb r4, r3, r4                   // ..................................................................................................................................................................................................*........................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        pkhtb r14, r14, r11, asr #16        // ....................................................................................................................................................................................................*......................................................................................................
        smlabt r9, r9, r12, r0              // .......................................................................................................................................................................................................*...................................................................................................
        smlabt r11, r4, r12, r0             // .....................................................................................................................................................................................................*.....................................................................................................
        uadd16 r4, r5, r14                  // ........................................................................................................................................................................................................*..................................................................................................
        usub16 r5, r5, r14                  // ......................................................................................................................................................................................................*....................................................................................................
        smulwb r14, r3, r4                  // ..........................................................................................................................................................................................................*................................................................................................
        pkhtb r9, r9, r11, asr #16          // ...........................................................................................................................................................................................................*...............................................................................................
        smulwt r11, r3, r4                  // .............................................................................................................................................................................................................*.............................................................................................
        smlabt r3, r14, r12, r0             // ..............................................................................................................................................................................................................*............................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        usub16 r4, r2, r9                   // ....................................................................................................................................................................................................................*......................................................................................
        smlabt r11, r11, r12, r0            // ...............................................................................................................................................................................................................*...........................................................................................
        smulwb r14, r10, r5                 // ...........................................................................................................................................................................................................................*...............................................................................
        uadd16 r2, r2, r9                   // .....................................................................................................................................................................................................................*.....................................................................................
        pkhtb r11, r11, r3, asr #16         // .................................................................................................................................................................................................................*.........................................................................................
        smulwt r9, r10, r5                  // ............................................................................................................................................................................................................................*..............................................................................
        uadd16 r3, r1, r11                  // ......................................................................................................................................................................................................................*....................................................................................
        smlabt r14, r14, r12, r0            // .............................................................................................................................................................................................................................*.............................................................................
        usub16 r5, r1, r11                  // ........................................................................................................................................................................................................................*..................................................................................
        smlabt r9, r9, r12, r0              // ..............................................................................................................................................................................................................................*............................................................................
        vmov r1, s12                        // ...............................................................................................................................................................................................................................................*...........................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        vmov r11, s11                       // ..................................................................................................................................................................................................................................*........................................................................
        smulwb r10, r1, r5                  // .........................................................................................................................................................................................................................................................*.................................................
        smulwt r1, r1, r5                   // ...........................................................................................................................................................................................................................................................*...............................................
        pkhtb r14, r9, r14, asr #16         // ...............................................................................................................................................................................................................................*...........................................................................
        smlabt r9, r10, r12, r0             // ............................................................................................................................................................................................................................................................*..............................................
        usub16 r10, r7, r14                 // .................................................................................................................................................................................................................................*.........................................................................
        smlabt r5, r1, r12, r0              // ...............................................................................................................................................................................................................................................................*...........................................
        uadd16 r14, r7, r14                 // ....................................................................................................................................................................................................................................*......................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r1, r11, r3                  // .................................................................................................................................................................................................................................................*.........................................................
        pkhtb r9, r5, r9, asr #16           // ...................................................................................................................................................................................................................................................................*.......................................
        smulwt r7, r11, r3                  // ..................................................................................................................................................................................................................................................*........................................................
        vmov r5, s13                        // .......................................................................................................................................................................................................................................*...................................................................
        smlabt r3, r1, r12, r0              // .....................................................................................................................................................................................................................................................*.....................................................
        smlabt r7, r7, r12, r0              // .......................................................................................................................................................................................................................................................*...................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwb r1, r5, r14                  // .........................................................................................................................................................................................................................................*.................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        pkhtb r3, r7, r3, asr #16           // ..........................................................................................................................................................................................................................................................*................................................
        smulwt r5, r5, r14                  // ..........................................................................................................................................................................................................................................*................................................................
        vmov r14, s1                        // ........................................................................................................................................................................................................................................................*..................................................
        smlabt r1, r1, r12, r0              // ................................................................................................................................................................................................................................................*..........................................................
        vmov r7, s14                        // ................................................................................................................................................................................................................................*..........................................................................
        smlabt r11, r5, r12, r0             // ..............................................................................................................................................................................................................................................*............................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        smulwt r5, r7, r10                  // .....................................................................................................................................................................................................................................*.....................................................................
        pkhtb r1, r11, r1, asr #16          // ...................................................................................................................................................................................................................................................*.......................................................
        smulwb r10, r7, r10                 // ...................................................................................................................................................................................................................................*.......................................................................
        smlabt r7, r5, r12, r0              // ........................................................................................................................................................................................................................................*..................................................................
        usub16 r11, r4, r9                  // ....................................................................................................................................................................................................................................................................*......................................
        uadd16 r4, r4, r9                   // .....................................................................................................................................................................................................................................................................*.....................................
        smlabt r9, r10, r12, r0             // ......................................................................................................................................................................................................................................*....................................................................
        vmov r0, s23                        // .................................................................................................................................................................................................................................................................*.........................................
        usub16 r5, r2, r3                   // .............................................................................................................................................................................................................................................................*.............................................
        uadd16 r10, r5, r14                 // ..............................................................................................................................................................................................................................................................*............................................
        str.w r10, [r0, #64]                // ......................................................................................................................................................................................................................................................................*....................................
        uadd16 r2, r2, r3                   // ..................................................................................................................................................................................................................................................................*........................................
        usub16 r10, r5, r14                 // ................................................................................................................................................................................................................................................................*..........................................
        str.w r10, [r0, #96]                // .......................................................................................................................................................................................................................................................................*...................................
        vmov r10, s3                        // ........................................................................................................................................................................................................................................................................*..................................
        uadd16 r14, r11, r10                // .........................................................................................................................................................................................................................................................................*.................................
        usub16 r5, r11, r10                 // ..........................................................................................................................................................................................................................................................................*................................
        pkhtb r10, r7, r9, asr #16          // ...........................................................................................................................................................................................................................................*...............................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        vmov r11, s7                        // ................................................................................................................................................................................................................................................................................*..........................
        usub16 r7, r6, r1                   // ....................................................................................................................................................................................................................................................*......................................................
        uadd16 r6, r6, r1                   // ......................................................................................................................................................................................................................................................*....................................................
        usub16 r9, r8, r10                  // ............................................................................................................................................................................................................................................*..............................................................
        uadd16 r3, r9, r11                  // ................................................................................................................................................................................................................................................................................................*..........
        str.w r3, [r0, #448]                // ..................................................................................................................................................................................................................................................................................................*........
        vmov r1, s4                         // .....................................................................................................................................................................................................................................................................................*.....................
        usub16 r11, r9, r11                 // .......................................................................................................................................................................................................................................................................................................*...
        usub16 r3, r6, r1                   // ........................................................................................................................................................................................................................................................................................*..................
        str.w r3, [r0, #288]                // .....................................................................................................................................................................................................................................................................................................*.....
        vmov r9, s6                         // .........................................................................................................................................................................................................................................................................................*.................
        uadd16 r8, r8, r10                  // .............................................................................................................................................................................................................................................*.............................................................
        usub16 r3, r8, r9                   // ............................................................................................................................................................................................................................................................................................*..............
        str.w r3, [r0, #416]                // ..............................................................................................................................................................................................................................................................................................*............
        uadd16 r10, r8, r9                  // .............................................................................................................................................................................................................................................................................................*.............
        vmov r8, s2                         // ...................................................................................................................................................................................................................................................................................*.......................
        usub16 r3, r4, r8                   // ....................................................................................................................................................................................................................................................................................*......................
        str.w r11, [r0, #480]               // .........................................................................................................................................................................................................................................................................................................*.
        uadd16 r11, r4, r8                  // .......................................................................................................................................................................................................................................................................................*...................
        vmov r4, s0                         // ...............................................................................................................................................................................................................................................................................................*...........
        str.w r11, [r0, #128]               // ....................................................................................................................................................................................................................................................................................................*......
        vmov r9, s5                         // .............................................................................................................................................................................................................................................................................*.............................
        usub16 r8, r7, r9                   // .................................................................................................................................................................................................................................................................................*.........................
        uadd16 r9, r7, r9                   // ..............................................................................................................................................................................................................................................................................*............................
        str.w r9, [r0, #320]                // ...............................................................................................................................................................................................................................................................................*...........................
        usub16 r7, r2, r4                   // ...................................................................................................................................................................................................................................................................................................*.......
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r10, [r0, #384]               // ........................................................................................................................................................................................................................................................................................................*..
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r3, [r0, #160]                // ......................................................................................................................................................................................................................................................................................*....................
        uadd16 r3, r6, r1                   // ..........................................................................................................................................................................................................................................................................................*................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r7, [r0, #32]                 // ......................................................................................................................................................................................................................................................................................................*....
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r3, [r0, #256]                // ...........................................................................................................................................................................................................................................................................................*...............
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r14, [r0, #192]               // ...........................................................................................................................................................................................................................................................................*...............................
        uadd16 r14, r2, r4                  // .................................................................................................................................................................................................................................................................................................*.........
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r5, [r0, #224]                // ............................................................................................................................................................................................................................................................................*..............................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r8, [r0, #352]                // ..................................................................................................................................................................................................................................................................................*........................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        // gap                              // ...........................................................................................................................................................................................................................................................................................................
        str.w r14, [r0], #4                 // ..........................................................................................................................................................................................................................................................................................................*
        // gap                              // ...........................................................................................................................................................................................................................................................................................................

                                             // ---------------------------------------------------------------------------------------------------------------------------------------------- new position ---------------------------------------------------------------------------------------------------------------------------------------------->
                                             // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225                      250                      275
                                             // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-----------------------
        // vmov r4, s8                       // *..........................................................................................................................................................................................................................................................................................................
        // ldr.w r5, [r0, #416]              // ..*........................................................................................................................................................................................................................................................................................................
        // vmov s23, r0                      // ...*.......................................................................................................................................................................................................................................................................................................
        // ldr.w r1, [r0, #352]              // .........*.................................................................................................................................................................................................................................................................................................
        // smulwt r6, r4, r5                 // .........................*.................................................................................................................................................................................................................................................................................
        // ldr.w r9, [r0, #288]              // .....*.....................................................................................................................................................................................................................................................................................................
        // smulwb r3, r4, r1                 // ....................*......................................................................................................................................................................................................................................................................................
        // ldr.w r8, [r0, #32]               // ............*..............................................................................................................................................................................................................................................................................................
        // smulwb r2, r4, r9                 // ........*..................................................................................................................................................................................................................................................................................................
        // ldr.w r14, [r0, #96]              // ......*....................................................................................................................................................................................................................................................................................................
        // ldr.w r10, [r0, #160]             // ..........*................................................................................................................................................................................................................................................................................................
        // smulwb r11, r4, r5                // ........................*..................................................................................................................................................................................................................................................................................
        // smulwt r9, r4, r9                 // ...........*...............................................................................................................................................................................................................................................................................................
        // ldr.w r7, [r0, #480]              // .*.........................................................................................................................................................................................................................................................................................................
        // ldr.w r5, [r0, #224]              // ..............*............................................................................................................................................................................................................................................................................................
        // movw r0, #24608                   // ...............*...........................................................................................................................................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // .....................*.....................................................................................................................................................................................................................................................................................
        // smlabt r3, r3, r12, r0            // .................................*.........................................................................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // ..................*........................................................................................................................................................................................................................................................................................
        // smlabt r11, r11, r12, r0          // ............................*..............................................................................................................................................................................................................................................................................
        // smulwt r1, r4, r1                 // .............*.............................................................................................................................................................................................................................................................................................
        // pkhtb r2, r9, r2, asr #16         // ..........................*................................................................................................................................................................................................................................................................................
        // smlabt r9, r6, r12, r0            // ..............................*............................................................................................................................................................................................................................................................................
        // usub16 r6, r8, r2                 // ...........................*...............................................................................................................................................................................................................................................................................
        // uadd16 r2, r8, r2                 // .............................*.............................................................................................................................................................................................................................................................................
        // smlabt r1, r1, r12, r0            // ................................*..........................................................................................................................................................................................................................................................................
        // smulwb r8, r4, r7                 // ....*......................................................................................................................................................................................................................................................................................................
        // pkhtb r9, r9, r11, asr #16        // ..................................*........................................................................................................................................................................................................................................................................
        // smulwt r7, r4, r7                 // .......*...................................................................................................................................................................................................................................................................................................
        // pkhtb r4, r1, r3, asr #16         // ......................................*....................................................................................................................................................................................................................................................................
        // smlabt r11, r8, r12, r0           // .................*.........................................................................................................................................................................................................................................................................................
        // uadd16 r3, r14, r4                // ........................................*..................................................................................................................................................................................................................................................................
        // smlabt r1, r7, r12, r0            // ................*..........................................................................................................................................................................................................................................................................................
        // usub16 r7, r14, r4                // ..........................................*................................................................................................................................................................................................................................................................
        // uadd16 r4, r10, r9                // .....................................*.....................................................................................................................................................................................................................................................................
        // usub16 r8, r10, r9                // ....................................*......................................................................................................................................................................................................................................................................
        // pkhtb r14, r1, r11, asr #16       // ...................*.......................................................................................................................................................................................................................................................................................
        // usub16 r9, r5, r14                // ......................*....................................................................................................................................................................................................................................................................................
        // uadd16 r5, r5, r14                // .......................*...................................................................................................................................................................................................................................................................................
        // vmov r10, s9                      // ...............................*...........................................................................................................................................................................................................................................................................
        // vmov r11, s10                     // ...................................*.......................................................................................................................................................................................................................................................................
        // smulwb r14, r10, r4               // .......................................*...................................................................................................................................................................................................................................................................
        // smulwt r4, r10, r4                // .........................................*.................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...........................................*...............................................................................................................................................................................................................................................................
        // smlabt r4, r4, r12, r0            // ............................................*..............................................................................................................................................................................................................................................................
        // smulwb r1, r10, r5                // ..............................................*............................................................................................................................................................................................................................................................
        // smulwt r10, r10, r5               // .............................................*.............................................................................................................................................................................................................................................................
        // smlabt r1, r1, r12, r0            // ...................................................*.......................................................................................................................................................................................................................................................
        // pkhtb r5, r4, r14, asr #16        // ...............................................*...........................................................................................................................................................................................................................................................
        // smulwt r14, r11, r8               // ......................................................*....................................................................................................................................................................................................................................................
        // usub16 r4, r2, r5                 // ................................................*..........................................................................................................................................................................................................................................................
        // smlabt r10, r10, r12, r0          // .................................................*.........................................................................................................................................................................................................................................................
        // uadd16 r5, r2, r5                 // ..................................................*........................................................................................................................................................................................................................................................
        // smlabt r2, r14, r12, r0           // .........................................................*.................................................................................................................................................................................................................................................
        // pkhtb r14, r10, r1, asr #16       // .....................................................*.....................................................................................................................................................................................................................................................
        // smulwb r1, r11, r9                // ............................................................*..............................................................................................................................................................................................................................................
        // uadd16 r10, r3, r14               // ........................................................*..................................................................................................................................................................................................................................................
        // smulwt r9, r11, r9                // ....................................................................*......................................................................................................................................................................................................................................
        // usub16 r14, r3, r14               // ..........................................................*................................................................................................................................................................................................................................................
        // smlabt r1, r1, r12, r0            // .......................................................................*...................................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // ..........................................................................*................................................................................................................................................................................................................................
        // smulwb r3, r11, r8                // ....................................................*......................................................................................................................................................................................................................................................
        // vmov r11, s11                     // .....................................................................*.....................................................................................................................................................................................................................................
        // pkhtb r8, r9, r1, asr #16         // ................................................................................*..........................................................................................................................................................................................................................
        // smulwt r1, r11, r10               // ............................................................................*..............................................................................................................................................................................................................................
        // usub16 r9, r7, r8                 // ..................................................................................*........................................................................................................................................................................................................................
        // smulwb r11, r11, r10              // .........................................................................*.................................................................................................................................................................................................................................
        // uadd16 r7, r7, r8                 // ...................................................................................*.......................................................................................................................................................................................................................
        // smlabt r10, r3, r12, r0           // .......................................................*...................................................................................................................................................................................................................................................
        // smlabt r3, r1, r12, r0            // .................................................................................*.........................................................................................................................................................................................................................
        // smlabt r1, r11, r12, r0           // ..............................................................................*............................................................................................................................................................................................................................
        // pkhtb r11, r2, r10, asr #16       // .............................................................*.............................................................................................................................................................................................................................................
        // vmov r10, s12                     // ...........................................................*...............................................................................................................................................................................................................................................
        // usub16 r8, r6, r11                // .................................................................*.........................................................................................................................................................................................................................................
        // smulwb r2, r10, r14               // ..............................................................*............................................................................................................................................................................................................................................
        // pkhtb r1, r3, r1, asr #16         // .......................................................................................*...................................................................................................................................................................................................................
        // usub16 r3, r5, r1                 // ...........................................................................................*...............................................................................................................................................................................................................
        // smulwt r10, r10, r14              // ...............................................................*...........................................................................................................................................................................................................................................
        // smlabt r14, r2, r12, r0           // ................................................................*..........................................................................................................................................................................................................................................
        // uadd16 r6, r6, r11                // ..................................................................*........................................................................................................................................................................................................................................
        // uadd16 r2, r5, r1                 // .........................................................................................*.................................................................................................................................................................................................................
        // smlabt r5, r10, r12, r0           // ...................................................................*.......................................................................................................................................................................................................................................
        // pkhtb r14, r5, r14, asr #16       // ......................................................................*....................................................................................................................................................................................................................................
        // usub16 r5, r4, r14                // ........................................................................*..................................................................................................................................................................................................................................
        // uadd16 r4, r4, r14                // ...........................................................................*...............................................................................................................................................................................................................................
        // vmov r10, s13                     // .............................................................................*.............................................................................................................................................................................................................................
        // vmov r11, s14                     // ...............................................................................*...........................................................................................................................................................................................................................
        // smulwb r14, r10, r7               // ........................................................................................*..................................................................................................................................................................................................................
        // smulwt r7, r10, r7                // ............................................................................................*..............................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ..........................................................................................................*................................................................................................................................................................................................
        // vmov r10, s18                     // ......................................................................................................*....................................................................................................................................................................................................
        // smlabt r1, r7, r12, r0            // ..................................................................................................*........................................................................................................................................................................................................
        // smulwt r7, r10, r5                // ..............................................................................................................*............................................................................................................................................................................................
        // pkhtb r1, r1, r14, asr #16        // .................................................................................................................*.........................................................................................................................................................................................
        // smulwb r5, r10, r5                // .............................................................................................................*.............................................................................................................................................................................................
        // smlabt r14, r7, r12, r0           // ....................................................................................................................*......................................................................................................................................................................................
        // smulwb r10, r11, r9               // .....................................................................................*.....................................................................................................................................................................................................................
        // usub16 r7, r6, r1                 // .......................................................................................................................*...................................................................................................................................................................................
        // uadd16 r6, r6, r1                 // .........................................................................................................................*.................................................................................................................................................................................
        // smulwt r1, r11, r9                // ....................................................................................*......................................................................................................................................................................................................................
        // smlabt r11, r10, r12, r0          // ..........................................................................................*................................................................................................................................................................................................................
        // vmov r9, s17                      // .............................................................................................*.............................................................................................................................................................................................................
        // smlabt r10, r1, r12, r0           // ......................................................................................*....................................................................................................................................................................................................................
        // smulwt r1, r9, r4                 // ..............................................................................................*............................................................................................................................................................................................................
        // pkhtb r10, r10, r11, asr #16      // ................................................................................................*..........................................................................................................................................................................................................
        // smulwb r4, r9, r4                 // ...............................................................................................*...........................................................................................................................................................................................................
        // usub16 r9, r8, r10                // ..................................................................................................................*........................................................................................................................................................................................
        // smlabt r1, r1, r12, r0            // .........................................................................................................*.................................................................................................................................................................................................
        // vmov r11, s16                     // ...............................................................................................................*...........................................................................................................................................................................................
        // smlabt r4, r4, r12, r0            // ........................................................................................................*..................................................................................................................................................................................................
        // uadd16 r8, r8, r10                // .....................................................................................................................*.....................................................................................................................................................................................
        // smulwt r10, r11, r3               // ................................................................................................................*..........................................................................................................................................................................................
        // pkhtb r4, r1, r4, asr #16         // ............................................................................................................*..............................................................................................................................................................................................
        // smulwb r3, r11, r3                // ...................................................................................................................*.......................................................................................................................................................................................
        // smlabt r10, r10, r12, r0          // ......................................................................................................................*....................................................................................................................................................................................
        // vmov r1, s15                      // .................................................................................................*.........................................................................................................................................................................................................
        // smlabt r3, r3, r12, r0            // ..........................................................................................................................*................................................................................................................................................................................
        // smulwt r11, r1, r2                // ...................................................................................................*.......................................................................................................................................................................................................
        // pkhtb r3, r10, r3, asr #16        // .................................................................................................................................*.........................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // ........................................................................................................................*..................................................................................................................................................................................
        // smulwb r2, r1, r2                 // ....................................................................................................*......................................................................................................................................................................................................
        // vmov r10, s19                     // ...........................................................................................................................*...............................................................................................................................................................................
        // pkhtb r5, r14, r5, asr #16        // ................................................................................................................................*..........................................................................................................................................................................
        // smlabt r14, r11, r12, r0          // .....................................................................................................*.....................................................................................................................................................................................................
        // vmov r11, s20                     // ..........................................................................................................................................*................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // .......................................................................................................*...................................................................................................................................................................................................
        // pkhtb r2, r14, r2, asr #16        // ...........................................................................................................*...............................................................................................................................................................................................
        // smulwb r14, r10, r6               // ............................................................................................................................*..............................................................................................................................................................................
        // smulwt r6, r10, r6                // .............................................................................................................................*.............................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ..............................................................................................................................*............................................................................................................................................................................
        // smlabt r6, r6, r12, r0            // ...............................................................................................................................*...........................................................................................................................................................................
        // pkhtb r6, r6, r14, asr #16        // ...........................................................................................................................................*...............................................................................................................................................................
        // smulwb r14, r11, r7               // ............................................................................................................................................*..............................................................................................................................................................
        // smulwt r7, r11, r7                // ..............................................................................................................................................*............................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ................................................................................................................................................*..........................................................................................................................................................
        // smlabt r7, r7, r12, r0            // .................................................................................................................................................*.........................................................................................................................................................
        // vmov r10, s8                      // ..........................................................................................................................................................*................................................................................................................................................
        // vmov r11, s21                     // ..................................................................................................................................................*........................................................................................................................................................
        // smulwb r1, r11, r8                // ...................................................................................................................................................*.......................................................................................................................................................
        // vmov s3, r5                       // .......................................................................................................................................................................*...................................................................................................................................
        // vmov s4, r6                       // ...............................................................................................................................................*...........................................................................................................................................................
        // smulwt r11, r11, r8               // .....................................................................................................................................................*.....................................................................................................................................................
        // smlabt r6, r1, r12, r0            // .......................................................................................................................................................*...................................................................................................................................................
        // vmov s2, r4                       // .......................................................................................................................................*...................................................................................................................................................................
        // smlabt r4, r11, r12, r0           // .........................................................................................................................................................*.................................................................................................................................................
        // vmov s0, r2                       // ..................................................................................................................................................................*........................................................................................................................................
        // vmov r11, s22                     // ..................................................................................................................................*........................................................................................................................................................................
        // pkhtb r14, r7, r14, asr #16       // ......................................................................................................................................................*....................................................................................................................................................
        // pkhtb r5, r4, r6, asr #16         // ................................................................................................................................................................*..........................................................................................................................................
        // smulwt r7, r11, r9                // ....................................................................................................................................*......................................................................................................................................................................
        // smulwb r9, r11, r9                // .....................................................................................................................................*.....................................................................................................................................................................
        // vmov r1, s23                      // ...................................................................................................................................*.......................................................................................................................................................................
        // smlabt r8, r7, r12, r0            // ........................................................................................................................................*..................................................................................................................................................................
        // ldr.w r4, [r1, #256]              // ........................................................................................................................................................*..................................................................................................................................................
        // smlabt r6, r9, r12, r0            // .........................................................................................................................................*.................................................................................................................................................................
        // movw r0, #24608                   // ..............................................................................................................................................................*............................................................................................................................................
        // smulwt r2, r10, r4                // ............................................................................................................................................................*..............................................................................................................................................
        // ldr.w r7, [r1, #320]              // ......................................................................................................................................................................*....................................................................................................................................
        // smulwb r11, r10, r4               // .............................................................................................................................................................*.............................................................................................................................................
        // pkhtb r8, r8, r6, asr #16         // .............................................................................................................................................*.............................................................................................................................................................
        // ldr.w r9, [r1, #448]              // ......................................................................................................................................*....................................................................................................................................................................
        // smlabt r6, r2, r12, r0            // ...............................................................................................................................................................*...........................................................................................................................................
        // vmov s7, r8                       // ....................................................................................................................................................*......................................................................................................................................................
        // ldr.w r8, [r1, #384]              // ...................................................................................................................................................................*.......................................................................................................................................
        // vmov s6, r5                       // ........................................................................................................................................................................................*..................................................................................................................
        // ldr.w r4, [r1, #128]              // .........................................................................................................................................................................................*.................................................................................................................
        // ldr.w r5, [r1, #192]              // ...........................................................................................................................................................................*...............................................................................................................................
        // vmov s1, r3                       // ....................................................................................................................................................................*......................................................................................................................................
        // ldr.w r3, [r1, #64]               // ..................................................................................................................................................................................*........................................................................................................................
        // vmov s5, r14                      // ...........................................................................................................................................................*...............................................................................................................................................
        // ldr.w r2, [r1, #0]                // ........................................................................................................................................................................*..................................................................................................................................
        // smlabt r14, r11, r12, r0          // .................................................................................................................................................................*.........................................................................................................................................
        // pkhtb r14, r6, r14, asr #16       // .....................................................................................................................................................................*.....................................................................................................................................
        // usub16 r6, r2, r14                // .........................................................................................................................................................................*.................................................................................................................................
        // uadd16 r2, r2, r14                // ..........................................................................................................................................................................*................................................................................................................................
        // smulwb r14, r10, r7               // ............................................................................................................................................................................*..............................................................................................................................
        // smulwt r7, r10, r7                // .................................................................................................................................................................................*.........................................................................................................................
        // smlabt r14, r14, r12, r0          // .......................................................................................................................................................................................*...................................................................................................................
        // smlabt r7, r7, r12, r0            // ............................................................................................................................................................................................*..............................................................................................................
        // vmov r1, s9                       // ........................................................................................................................................................................................................*..................................................................................................
        // smulwb r11, r10, r8               // ..............................................................................................................................................................................*............................................................................................................................
        // pkhtb r7, r7, r14, asr #16        // ...............................................................................................................................................................................................*...........................................................................................................
        // smulwt r14, r10, r8               // .............................................................................................................................................................................*.............................................................................................................................
        // smlabt r11, r11, r12, r0          // ................................................................................................................................................................................*..........................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................................................................................................................................................................*...........................................................................................................................
        // uadd16 r8, r3, r7                 // .................................................................................................................................................................................................*.........................................................................................................
        // usub16 r7, r3, r7                 // ...................................................................................................................................................................................................*.......................................................................................................
        // smulwt r3, r10, r9                // .....................................................................................................................................................................................*.....................................................................................................................
        // smulwb r9, r10, r9                // ....................................................................................................................................................................................*......................................................................................................................
        // pkhtb r11, r14, r11, asr #16      // ...................................................................................................................................................................................*.......................................................................................................................
        // smlabt r14, r3, r12, r0           // .....................................................................................................................................................................................................*.....................................................................................................
        // usub16 r3, r4, r11                // ...........................................................................................................................................................................................*...............................................................................................................
        // smlabt r9, r9, r12, r0            // ..........................................................................................................................................................................................*................................................................................................................
        // uadd16 r10, r4, r11               // .............................................................................................................................................................................................*.............................................................................................................
        // smulwb r4, r1, r10                // ...........................................................................................................................................................................................................*...............................................................................................
        // smulwt r11, r1, r10               // ..........................................................................................................................................................................................................*................................................................................................
        // pkhtb r14, r14, r9, asr #16       // ............................................................................................................................................................................................................*..............................................................................................
        // smlabt r4, r4, r12, r0            // ..............................................................................................................................................................................................................*............................................................................................
        // usub16 r9, r5, r14                // ................................................................................................................................................................................................................*..........................................................................................
        // smlabt r10, r11, r12, r0          // .............................................................................................................................................................................................................*.............................................................................................
        // uadd16 r5, r5, r14                // ...............................................................................................................................................................................................................*...........................................................................................
        // vmov r11, s10                     // ......................................................................................................................................................................................*....................................................................................................................
        // smulwb r14, r1, r5                // .................................................................................................................................................................................................................*.........................................................................................
        // pkhtb r10, r10, r4, asr #16       // ..................................................................................................................................................................................................................*........................................................................................
        // smulwb r4, r11, r3                // ..............................................................................................................................................................................................*............................................................................................................
        // smulwt r5, r1, r5                 // ...................................................................................................................................................................................................................*.......................................................................................
        // smlabt r14, r14, r12, r0          // ....................................................................................................................................................................................................................*......................................................................................
        // smlabt r5, r5, r12, r0            // ......................................................................................................................................................................................................................*....................................................................................
        // smulwt r3, r11, r3                // ................................................................................................................................................................................................*..........................................................................................................
        // pkhtb r5, r5, r14, asr #16        // .........................................................................................................................................................................................................................*.................................................................................
        // smlabt r1, r4, r12, r0            // ..................................................................................................................................................................................................*........................................................................................................
        // smlabt r14, r3, r12, r0           // ....................................................................................................................................................................................................*......................................................................................................
        // usub16 r4, r2, r10                // .....................................................................................................................................................................................................................*.....................................................................................
        // uadd16 r2, r2, r10                // ........................................................................................................................................................................................................................*..................................................................................
        // uadd16 r3, r8, r5                 // ...........................................................................................................................................................................................................................*...............................................................................
        // pkhtb r14, r14, r1, asr #16       // ......................................................................................................................................................................................................*....................................................................................................
        // usub16 r5, r8, r5                 // .............................................................................................................................................................................................................................*.............................................................................
        // usub16 r8, r6, r14                // .......................................................................................................................................................................................................*...................................................................................................
        // uadd16 r6, r6, r14                // .........................................................................................................................................................................................................*.................................................................................................
        // smulwb r14, r11, r9               // .......................................................................................................................................................................................................................*...................................................................................
        // smulwt r9, r11, r9                // ..........................................................................................................................................................................................................................*................................................................................
        // smlabt r14, r14, r12, r0          // ............................................................................................................................................................................................................................*..............................................................................
        // smlabt r9, r9, r12, r0            // ..............................................................................................................................................................................................................................*............................................................................
        // pkhtb r14, r9, r14, asr #16       // ...................................................................................................................................................................................................................................*.......................................................................
        // vmov r9, s14                      // ...................................................................................................................................................................................................................................................*.......................................................
        // usub16 r1, r7, r14                // .....................................................................................................................................................................................................................................*.....................................................................
        // vmov r10, s11                     // ................................................................................................................................................................................................................................*..........................................................................
        // smulwb r11, r9, r1                // .......................................................................................................................................................................................................................................................*...................................................
        // uadd16 r14, r7, r14               // .......................................................................................................................................................................................................................................*...................................................................
        // smulwt r1, r9, r1                 // .....................................................................................................................................................................................................................................................*.....................................................
        // smlabt r9, r11, r12, r0           // ...........................................................................................................................................................................................................................................................*...............................................
        // vmov r7, s13                      // ...........................................................................................................................................................................................................................................*...............................................................
        // smlabt r1, r1, r12, r0            // ........................................................................................................................................................................................................................................................*..................................................
        // smulwb r11, r7, r14               // ..............................................................................................................................................................................................................................................*............................................................
        // smulwt r14, r7, r14               // ................................................................................................................................................................................................................................................*..........................................................
        // pkhtb r1, r1, r9, asr #16         // ......................................................................................................................................................................................................................................................................*....................................
        // usub16 r9, r8, r1                 // ..........................................................................................................................................................................................................................................................................*................................
        // uadd16 r8, r8, r1                 // ..................................................................................................................................................................................................................................................................................*........................
        // smlabt r1, r14, r12, r0           // ....................................................................................................................................................................................................................................................*......................................................
        // vmov r14, s12                     // ...............................................................................................................................................................................................................................*...........................................................................
        // smlabt r7, r11, r12, r0           // ..................................................................................................................................................................................................................................................*........................................................
        // smulwb r11, r10, r3               // ........................................................................................................................................................................................................................................*..................................................................
        // smulwt r3, r10, r3                // ..........................................................................................................................................................................................................................................*................................................................
        // pkhtb r1, r1, r7, asr #16         // ......................................................................................................................................................................................................................................................*....................................................
        // usub16 r7, r6, r1                 // ........................................................................................................................................................................................................................................................................*..................................
        // smlabt r11, r11, r12, r0          // ............................................................................................................................................................................................................................................*..............................................................
        // uadd16 r6, r6, r1                 // .........................................................................................................................................................................................................................................................................*.................................
        // smlabt r1, r3, r12, r0            // .............................................................................................................................................................................................................................................*.............................................................
        // vmov r3, s1                       // .................................................................................................................................................................................................................................................*.........................................................
        // smulwb r10, r14, r5               // .................................................................................................................................................................................................................................*.........................................................................
        // pkhtb r11, r1, r11, asr #16       // ...............................................................................................................................................................................................................................................*...........................................................
        // smulwt r1, r14, r5                // ..................................................................................................................................................................................................................................*........................................................................
        // smlabt r5, r10, r12, r0           // ....................................................................................................................................................................................................................................*......................................................................
        // usub16 r10, r2, r11               // .............................................................................................................................................................................................................................................................*.............................................
        // uadd16 r14, r10, r3               // ..............................................................................................................................................................................................................................................................*............................................
        // smlabt r1, r1, r12, r0            // ......................................................................................................................................................................................................................................*....................................................................
        // usub16 r3, r10, r3                // .................................................................................................................................................................................................................................................................*.........................................
        // vmov r0, s23                      // ............................................................................................................................................................................................................................................................*..............................................
        // uadd16 r2, r2, r11                // ................................................................................................................................................................................................................................................................*..........................................
        // pkhtb r1, r1, r5, asr #16         // .........................................................................................................................................................................................................................................*.................................................................
        // usub16 r5, r4, r1                 // .........................................................................................................................................................................................................................................................*.................................................
        // uadd16 r4, r4, r1                 // ..........................................................................................................................................................................................................................................................*................................................
        // str.w r14, [r0, #64]              // ...............................................................................................................................................................................................................................................................*...........................................
        // str.w r3, [r0, #96]               // ..................................................................................................................................................................................................................................................................*........................................
        // vmov r10, s3                      // ...................................................................................................................................................................................................................................................................*.......................................
        // uadd16 r14, r5, r10               // ....................................................................................................................................................................................................................................................................*......................................
        // usub16 r5, r5, r10                // .....................................................................................................................................................................................................................................................................*.....................................
        // str.w r14, [r0, #192]             // ......................................................................................................................................................................................................................................................................................................*....
        // str.w r5, [r0, #224]              // ........................................................................................................................................................................................................................................................................................................*..
        // vmov r5, s5                       // ............................................................................................................................................................................................................................................................................................*..............
        // uadd16 r11, r7, r5                // ..............................................................................................................................................................................................................................................................................................*............
        // str.w r11, [r0, #320]             // ...............................................................................................................................................................................................................................................................................................*...........
        // vmov r1, s7                       // .......................................................................................................................................................................................................................................................................*...................................
        // usub16 r14, r7, r5                // .............................................................................................................................................................................................................................................................................................*.............
        // str.w r14, [r0, #352]             // .........................................................................................................................................................................................................................................................................................................*.
        // vmov r14, s2                      // ......................................................................................................................................................................................................................................................................................*....................
        // usub16 r5, r4, r14                // .......................................................................................................................................................................................................................................................................................*...................
        // vmov r7, s4                       // .............................................................................................................................................................................................................................................................................*.............................
        // str.w r5, [r0, #160]              // ..................................................................................................................................................................................................................................................................................................*........
        // uadd16 r4, r4, r14                // .........................................................................................................................................................................................................................................................................................*.................
        // usub16 r11, r6, r7                // ...............................................................................................................................................................................................................................................................................*...........................
        // vmov r5, s6                       // .................................................................................................................................................................................................................................................................................*.........................
        // uadd16 r3, r6, r7                 // ...................................................................................................................................................................................................................................................................................................*.......
        // str.w r3, [r0, #256]              // .....................................................................................................................................................................................................................................................................................................*.....
        // usub16 r14, r8, r5                // ...................................................................................................................................................................................................................................................................................*.......................
        // uadd16 r6, r8, r5                 // .....................................................................................................................................................................................................................................................................................*.....................
        // str.w r14, [r0, #416]             // ....................................................................................................................................................................................................................................................................................*......................
        // vmov r5, s0                       // ..........................................................................................................................................................................................................................................................................................*................
        // uadd16 r10, r9, r1                // ...........................................................................................................................................................................................................................................................................*...............................
        // uadd16 r14, r2, r5                // .......................................................................................................................................................................................................................................................................................................*...
        // str.w r10, [r0, #448]             // ............................................................................................................................................................................................................................................................................*..............................
        // usub16 r5, r2, r5                 // ................................................................................................................................................................................................................................................................................................*..........
        // str.w r4, [r0, #128]              // ...........................................................................................................................................................................................................................................................................................*...............
        // str.w r11, [r0, #288]             // ................................................................................................................................................................................................................................................................................*..........................
        // str.w r5, [r0, #32]               // ....................................................................................................................................................................................................................................................................................................*......
        // usub16 r5, r9, r1                 // ..............................................................................................................................................................................................................................................................................*............................
        // str.w r6, [r0, #384]              // .................................................................................................................................................................................................................................................................................................*.........
        // str.w r5, [r0, #480]              // ........................................................................................................................................................................................................................................................................................*..................
        // str.w r14, [r0], #4               // ..........................................................................................................................................................................................................................................................................................................*

        vmov tmp, s24
        cmp poly, tmp
        bne layer1234_loop

 sub.w poly, #8*strincr

 ### LAYER 3+2+1

 .equ distance2, distance/16
 .equ strincr2, 32

 add.w tmp, poly, #strincr2*16
 vmov s13, tmp
        vmov twiddle_ptr, s25
layer567_loop:
                                           // Instructions:    112
                                           // Expected cycles: 62
                                           // Expected IPC:    1.81
                                           //
                                           // ---------------------------------------------- original position ---------------------------------------------->
                                           // 0                        25                       50                       75                       100
                                           // |------------------------|------------------------|------------------------|------------------------|-----------
        ldr.w r4, [r1], #4                 // .*..............................................................................................................
        ldr.w r3, [r0, #24]                // *...............................................................................................................
        ldr.w r6, [r0, #16]                // .........*......................................................................................................
        ldr.w r10, [r0, #28]               // ....*...........................................................................................................
        smulwt r5, r4, r3                  // .....*..........................................................................................................
        ldr.w r8, [r0, #12]                // .....................*..........................................................................................
        smulwb r14, r4, r10                // ...............*................................................................................................
        movw r11, #24608                   // .......*........................................................................................................
        smulwb r9, r4, r3                  // ............................*...................................................................................
        ldr r2, [r1], #8                   // ..................................*.............................................................................
        smlabt r3, r5, r12, r11            // .............*..................................................................................................
        vmov s26, r1                       // ..*............................................................................................................. // @slothy:is_spill // @slothy:writes=stack_0
        ldr r1, [r1, #-4]                  // ........................................*.......................................................................
        smlabt r5, r9, r12, r11            // .................................*..............................................................................
        smulwt r9, r4, r10                 // ................*...............................................................................................
        ldr.w r10, [r0, #8]                // .....................................*..........................................................................
        pkhtb r3, r3, r5, asr #16          // ....................................*...........................................................................
        smlabt r14, r14, r12, r11          // ...................*............................................................................................
        smlabt r7, r9, r12, r11            // ....................*...........................................................................................
        uadd16 r5, r10, r3                 // ......................................*.........................................................................
        usub16 r10, r10, r3                // .......................................*........................................................................
        smulwb r9, r2, r5                  // .........................................*......................................................................
        pkhtb r3, r7, r14, asr #16         // .......................*........................................................................................
        smulwt r14, r2, r5                 // ..........................................*.....................................................................
        smlabt r5, r9, r12, r11            // ...........................................*....................................................................
        usub16 r9, r8, r3                  // ...................................*............................................................................
        uadd16 r8, r8, r3                  // ................................*...............................................................................
        smlabt r14, r14, r12, r11          // ............................................*...................................................................
        smulwb r3, r4, r6                  // ......................*.........................................................................................
        // gap                             // ................................................................................................................
        pkhtb r5, r14, r5, asr #16         // .............................................*..................................................................
        smulwt r6, r4, r6                  // ........................*.......................................................................................
        smlabt r14, r3, r12, r11           // .........................*......................................................................................
        // gap                             // ................................................................................................................
        smlabt r3, r6, r12, r11            // ..........................*.....................................................................................
        // gap                             // ................................................................................................................
        smulwt r7, r2, r8                  // ...............................................*................................................................
        // gap                             // ................................................................................................................
        pkhtb r14, r3, r14, asr #16        // .............................*..................................................................................
        smulwb r3, r2, r8                  // ..............................................*.................................................................
        ldr.w r2, [r0, #0]                 // ...........................*....................................................................................
        smulwt r6, r1, r10                 // .........................................................*......................................................
        usub16 r8, r2, r14                 // ...............................*................................................................................
        smlabt r3, r3, r12, r11            // ..................................................*.............................................................
        smulwb r10, r1, r10                // ........................................................*.......................................................
        uadd16 r14, r2, r14                // ..............................*.................................................................................
        smlabt r2, r7, r12, r11            // ...................................................*............................................................
        uadd16 r7, r14, r5                 // ................................................*...............................................................
        smlabt r10, r10, r12, r11          // ..........................................................*.....................................................
        usub16 r5, r14, r5                 // .................................................*..............................................................
        smlabt r6, r6, r12, r11            // .............................................................*..................................................
        ldr.w r14, [r0, #20]               // ...*............................................................................................................
        pkhtb r3, r2, r3, asr #16          // ......................................................*.........................................................
        smulwb r2, r1, r9                  // ....................................................*...........................................................
        pkhtb r10, r6, r10, asr #16        // ................................................................*...............................................
        smulwt r6, r4, r14                 // ......*.........................................................................................................
        smulwb r4, r4, r14                 // ........*.......................................................................................................
        uadd16 r14, r8, r10                // ....................................................................*...........................................
        usub16 r10, r8, r10                // ...................................................................*............................................
        smlabt r8, r6, r12, r11            // ..........*.....................................................................................................
        smlabt r4, r4, r12, r11            // ...........*....................................................................................................
        ldr.w r6, [r0, #4]                 // ............*...................................................................................................
        smulwt r9, r1, r9                  // .....................................................*..........................................................
        vmov r1, s26                       // ...............................................................*................................................ // @slothy:is_restore // @slothy:reads=stack_0
        pkhtb r8, r8, r4, asr #16          // ..............*.................................................................................................
        ldr r4, [r1], #8                   // .................................................................*..............................................
        vmov s26, r10                      // .........................................................................*...................................... // @slothy:is_spill // @slothy:writes=stack_0
        uadd16 r10, r6, r8                 // ..................*.............................................................................................
        usub16 r6, r6, r8                  // .................*..............................................................................................
        uadd16 r8, r10, r3                 // ...........................................................*....................................................
        usub16 r3, r10, r3                 // ............................................................*...................................................
        smulwt r10, r4, r8                 // ......................................................................*.........................................
        smulwb r4, r4, r8                  // .....................................................................*..........................................
        // gap                             // ................................................................................................................
        smlabt r10, r10, r12, r11          // ..........................................................................*.....................................
        // gap                             // ................................................................................................................
        smlabt r4, r4, r12, r11            // ........................................................................*.......................................
        // gap                             // ................................................................................................................
        smlabt r8, r2, r12, r11            // .......................................................*........................................................
        // gap                             // ................................................................................................................
        pkhtb r10, r10, r4, asr #16        // ..............................................................................*.................................
        smlabt r2, r9, r12, r11            // ..............................................................*.................................................
        uadd16 r4, r7, r10                 // .........................................................................................*......................
        usub16 r7, r7, r10                 // ......................................................................................*.........................
        pkhtb r8, r2, r8, asr #16          // ..................................................................*.............................................
        ldr r2, [r1], #8                   // .......................................................................*........................................
        str.w r4, [r0], #32                // ..................................................................................................*.............
        uadd16 r10, r6, r8                 // ...........................................................................*....................................
        usub16 r8, r6, r8                  // ............................................................................*...................................
        smulwb r9, r2, r10                 // .............................................................................*..................................
        str.w r7, [r0, #-28]               // .......................................................................................*........................
        smulwt r10, r2, r10                // ...............................................................................*................................
        ldr r4, [r1, #-12]                 // .................................................................................*..............................
        smlabt r7, r9, r12, r11            // ................................................................................*...............................
        smlabt r10, r10, r12, r11          // ..................................................................................*.............................
        ldr r6, [r1, #-4]                  // ...............................................................................................*................
        smulwb r9, r4, r3                  // ...................................................................................*............................
        // gap                             // ................................................................................................................
        smulwt r2, r4, r3                  // .....................................................................................*..........................
        pkhtb r10, r10, r7, asr #16        // ....................................................................................*...........................
        smlabt r4, r9, r12, r11            // ............................................................................................*...................
        usub16 r3, r14, r10                // .............................................................................................*..................
        str.w r3, [r0, #-12]               // ..............................................................................................*.................
        smlabt r3, r2, r12, r11            // ........................................................................................*.......................
        uadd16 r2, r14, r10                // ..........................................................................................*.....................
        smulwt r7, r6, r8                  // ...................................................................................................*............
        pkhtb r3, r3, r4, asr #16          // ................................................................................................*...............
        str.w r2, [r0, #-16]               // ...........................................................................................*....................
        smulwb r10, r6, r8                 // ....................................................................................................*...........
        uadd16 r8, r5, r3                  // .........................................................................................................*......
        smlabt r14, r7, r12, r11           // ......................................................................................................*.........
        str.w r8, [r0, #-24]               // ..........................................................................................................*.....
        usub16 r3, r5, r3                  // .....................................................................................................*..........
        smlabt r9, r10, r12, r11           // ........................................................................................................*.......
        str.w r3, [r0, #-20]               // .......................................................................................................*........
        vmov r6, s26                       // .................................................................................................*.............. // @slothy:is_restore // @slothy:reads=stack_0
        pkhtb r14, r14, r9, asr #16        // ...........................................................................................................*....
        // gap                             // ................................................................................................................
        uadd16 r8, r6, r14                 // ............................................................................................................*...
        str.w r8, [r0, #-8]                // .............................................................................................................*..
        usub16 r5, r6, r14                 // ..............................................................................................................*.
        // gap                             // ................................................................................................................
        str.w r5, [r0, #-4]                // ...............................................................................................................*
        // gap                             // ................................................................................................................

                                             // ------------------------------------------------ new position ------------------------------------------------->
                                             // 0                        25                       50                       75                       100
                                             // |------------------------|------------------------|------------------------|------------------------|-----------
        // ldr.w r8, [r0, #24]               // .*..............................................................................................................
        // ldr.w r6, [r1], #4                // *...............................................................................................................
        // vmov s26, r1                      // ...........*....................................................................................................
        // ldr.w r4, [r0, #20]               // ...............................................*................................................................
        // ldr.w r7, [r0, #28]               // ...*............................................................................................................
        // smulwt r2, r6, r8                 // ....*...........................................................................................................
        // smulwt r10, r6, r4                // ...................................................*............................................................
        // movw r11, #24608                  // .......*........................................................................................................
        // smulwb r14, r6, r4                // ....................................................*...........................................................
        // ldr.w r4, [r0, #16]               // ..*.............................................................................................................
        // smlabt r9, r10, r12, r11          // .......................................................*........................................................
        // smlabt r14, r14, r12, r11         // ........................................................*.......................................................
        // ldr.w r10, [r0, #4]               // .........................................................*......................................................
        // smlabt r5, r2, r12, r11           // ..........*.....................................................................................................
        // pkhtb r14, r9, r14, asr #16       // ............................................................*...................................................
        // smulwb r9, r6, r7                 // ......*.........................................................................................................
        // smulwt r7, r6, r7                 // ..............*.................................................................................................
        // usub16 r2, r10, r14               // ................................................................*...............................................
        // uadd16 r14, r10, r14              // ...............................................................*................................................
        // smlabt r3, r9, r12, r11           // .................*..............................................................................................
        // smlabt r10, r7, r12, r11          // ..................*.............................................................................................
        // ldr.w r9, [r0, #12]               // .....*..........................................................................................................
        // smulwb r7, r6, r4                 // ............................*...................................................................................
        // pkhtb r10, r10, r3, asr #16       // ......................*.........................................................................................
        // smulwt r4, r6, r4                 // ..............................*.................................................................................
        // smlabt r3, r7, r12, r11           // ...............................*................................................................................
        // smlabt r4, r4, r12, r11           // ................................*...............................................................................
        // ldr.w r7, [r0, #0]                // ....................................*...........................................................................
        // smulwb r6, r6, r8                 // ........*.......................................................................................................
        // pkhtb r4, r4, r3, asr #16         // ..................................*.............................................................................
        // uadd16 r3, r7, r4                 // .........................................*......................................................................
        // usub16 r4, r7, r4                 // ......................................*.........................................................................
        // uadd16 r8, r9, r10                // ..........................*.....................................................................................
        // smlabt r6, r6, r12, r11           // .............*..................................................................................................
        // ldr r7, [r1], #8                  // .........*......................................................................................................
        // usub16 r9, r9, r10                // .........................*......................................................................................
        // pkhtb r10, r5, r6, asr #16        // ................*...............................................................................................
        // ldr.w r6, [r0, #8]                // ...............*................................................................................................
        // uadd16 r5, r6, r10                // ...................*............................................................................................
        // usub16 r10, r6, r10               // ....................*...........................................................................................
        // ldr r1, [r1, #-4]                 // ............*...................................................................................................
        // smulwb r6, r7, r5                 // .....................*..........................................................................................
        // smulwt r5, r7, r5                 // .......................*........................................................................................
        // smlabt r6, r6, r12, r11           // ........................*.......................................................................................
        // smlabt r5, r5, r12, r11           // ...........................*....................................................................................
        // pkhtb r5, r5, r6, asr #16         // .............................*..................................................................................
        // smulwb r6, r7, r8                 // ...................................*............................................................................
        // smulwt r8, r7, r8                 // .................................*..............................................................................
        // uadd16 r7, r3, r5                 // ...........................................*....................................................................
        // usub16 r5, r3, r5                 // .............................................*..................................................................
        // smlabt r6, r6, r12, r11           // .......................................*........................................................................
        // smlabt r3, r8, r12, r11           // ..........................................*.....................................................................
        // smulwb r8, r1, r9                 // .................................................*..............................................................
        // smulwt r9, r1, r9                 // ..........................................................*.....................................................
        // pkhtb r6, r3, r6, asr #16         // ................................................*...............................................................
        // smlabt r3, r8, r12, r11           // .......................................................................*........................................
        // smulwb r8, r1, r10                // ........................................*.......................................................................
        // smulwt r1, r1, r10                // .....................................*..........................................................................
        // smlabt r10, r8, r12, r11          // ............................................*...................................................................
        // uadd16 r8, r14, r6                // .................................................................*..............................................
        // usub16 r6, r14, r6                // ..................................................................*.............................................
        // smlabt r14, r1, r12, r11          // ..............................................*.................................................................
        // smlabt r9, r9, r12, r11           // .........................................................................*......................................
        // vmov r1, s26                      // ...........................................................*....................................................
        // pkhtb r14, r14, r10, asr #16      // ..................................................*.............................................................
        // ldr r10, [r1], #8                 // .............................................................*..................................................
        // pkhtb r9, r9, r3, asr #16         // ............................................................................*...................................
        // usub16 r3, r4, r14                // ......................................................*.........................................................
        // uadd16 r14, r4, r14               // .....................................................*..........................................................
        // smulwb r4, r10, r8                // ....................................................................*...........................................
        // smulwt r8, r10, r8                // ...................................................................*............................................
        // ldr r10, [r1], #8                 // .............................................................................*..................................
        // smlabt r4, r4, r12, r11           // ......................................................................*.........................................
        // vmov s26, r3                      // ..............................................................*.................................................
        // smlabt r3, r8, r12, r11           // .....................................................................*..........................................
        // uadd16 r8, r2, r9                 // ...............................................................................*................................
        // usub16 r2, r2, r9                 // ................................................................................*...............................
        // smulwb r9, r10, r8                // .................................................................................*..............................
        // pkhtb r3, r3, r4, asr #16         // ........................................................................*.......................................
        // smulwt r4, r10, r8                // ...................................................................................*............................
        // smlabt r8, r9, r12, r11           // .....................................................................................*..........................
        // ldr r10, [r1, #-12]               // ....................................................................................*...........................
        // smlabt r9, r4, r12, r11           // ......................................................................................*.........................
        // smulwb r4, r10, r6                // ........................................................................................*.......................
        // pkhtb r8, r9, r8, asr #16         // ..........................................................................................*.....................
        // smulwt r6, r10, r6                // .........................................................................................*......................
        // usub16 r10, r7, r3                // ...........................................................................*....................................
        // str.w r10, [r0, #4]               // ..................................................................................*.............................
        // smlabt r6, r6, r12, r11           // ..............................................................................................*.................
        // uadd16 r3, r7, r3                 // ..........................................................................*.....................................
        // uadd16 r7, r14, r8                // ...............................................................................................*................
        // str.w r7, [r0, #16]               // ..................................................................................................*.............
        // smlabt r4, r4, r12, r11           // ...........................................................................................*....................
        // usub16 r14, r14, r8               // ............................................................................................*...................
        // str.w r14, [r0, #20]              // .............................................................................................*..................
        // ldr r8, [r1, #-4]                 // .......................................................................................*........................
        // pkhtb r14, r6, r4, asr #16        // .................................................................................................*..............
        // vmov r9, s26                      // ..........................................................................................................*.....
        // str.w r3, [r0], #32               // ..............................................................................*.................................
        // smulwt r6, r8, r2                 // ................................................................................................*...............
        // smulwb r2, r8, r2                 // ...................................................................................................*............
        // usub16 r7, r5, r14                // .......................................................................................................*........
        // smlabt r4, r6, r12, r11           // .....................................................................................................*..........
        // str.w r7, [r0, #-20]              // .........................................................................................................*......
        // smlabt r2, r2, r12, r11           // ........................................................................................................*.......
        // uadd16 r5, r5, r14                // ....................................................................................................*...........
        // str.w r5, [r0, #-24]              // ......................................................................................................*.........
        // pkhtb r14, r4, r2, asr #16        // ...........................................................................................................*....
        // uadd16 r6, r9, r14                // ............................................................................................................*...
        // str.w r6, [r0, #-8]               // .............................................................................................................*..
        // usub16 r2, r9, r14                // ..............................................................................................................*.
        // str.w r2, [r0, #-4]               // ...............................................................................................................*

        vmov tmp, s13
        cmp poly, tmp
        bne layer567_loop
 vpop.w {s16-s27}
 pop {r4-r11, pc}
